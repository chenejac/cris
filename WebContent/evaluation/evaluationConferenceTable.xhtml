<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:mytags="http://dragan.tmd.uns.ac.rs/mytags">

	<h:panelGrid 
		id="evaluationConferenceSearchPanel"
		columns="6">
		<!-- ....... Start year .......           -->
		<p:outputPanel
				ajaxRendered="true"
		>
			<mytags:outputLabel
					value="#{messages['evaluation.conference.tablePanel.startYear']}"
					for="startYear"
					errorStyleClass="errorMessage"
			/>
		</p:outputPanel>
		<p:selectOneMenu
				id="startYear"
				value="#{evaluationConferenceRecordsManagedBean.startYear}">
			<f:selectItems value="#{evaluationConferenceRecordsManagedBean.yearRange}"/>
		</p:selectOneMenu>
		<p:outputPanel
				ajaxRendered="true"
		>
			<p:message
					for="startYear"
					errorClass="errorMessage"
					infoClass="infoMessage"
					warnClass="warnMessage"
					fatalClass="fatalMessage" />
		</p:outputPanel>
		<!-- ....... end year .......           -->
		<p:outputPanel
				ajaxRendered="true"
		>
			<mytags:outputLabel
					value="#{messages['evaluation.conference.tablePanel.endYear']}"
					for="endYear"
					errorStyleClass="errorMessage"
			/>
		</p:outputPanel>
		<p:selectOneMenu
				id="endYear"
				value="#{evaluationConferenceRecordsManagedBean.endYear}">
			<f:selectItems value="#{evaluationConferenceRecordsManagedBean.yearRange}"/>
		</p:selectOneMenu>
		<p:outputPanel
				ajaxRendered="true"
		>
			<p:message
					for="endYear"
					errorClass="errorMessage"
					infoClass="infoMessage"
					warnClass="warnMessage"
					fatalClass="fatalMessage" />
		</p:outputPanel>
		<p:commandButton
			action="#{evaluationConferenceRecordsManagedBean.collectTFConferences}"
			value="#{messages['evaluation.conference.tablePanel.btnTF']}"
			update="evaluationConferenceTablePanel evaluationConferenceSearchPanel"
			execute="@form"
			limitRender="true" />
		<p:commandButton
			action="#{evaluationConferenceRecordsManagedBean.collectPMFDMIConferences}"
			value="#{messages['evaluation.conference.tablePanel.btnPMFDMI']}"
			update="evaluationConferenceTablePanel evaluationConferenceSearchPanel"
			execute="@form"
			limitRender="true" />
		<p:commandButton
			action="#{evaluationConferenceRecordsManagedBean.collectPMFDFConferences}"
			value="#{messages['evaluation.conference.tablePanel.btnPMFDF']}"
			update="evaluationConferenceTablePanel evaluationConferenceSearchPanel"
			execute="@form"
			limitRender="true" />
		<p:commandButton
			action="#{evaluationConferenceRecordsManagedBean.collectPMFDHZZSConferences}"
			value="#{messages['evaluation.conference.tablePanel.btnPMFDHZZS']}"
			update="evaluationConferenceTablePanel evaluationConferenceSearchPanel"
			execute="@form"
			limitRender="true" />
		<p:commandButton
			action="#{evaluationConferenceRecordsManagedBean.collectPMFDBEConferences}"
			value="#{messages['evaluation.conference.tablePanel.btnPMFDBE']}"
			update="evaluationConferenceTablePanel evaluationConferenceSearchPanel"
			execute="@form"
			limitRender="true" />
		<p:commandButton
			action="#{evaluationConferenceRecordsManagedBean.collectPMFDGTHConferences}"
			value="#{messages['evaluation.conference.tablePanel.btnPMFDGTH']}"
			update="evaluationConferenceTablePanel evaluationConferenceSearchPanel"
			execute="@form"
			limitRender="true" />	
	</h:panelGrid>
	<!-- ===========================   tablePanel  ============================= -->
	<p:spacer
		height="10"
		width="1"
		/>
	
	<h:panelGrid id="evaluationConferenceTablePanel">
		<h:panelGrid 
			rendered="#{not empty evaluationConferenceRecordsManagedBean.commissionNumber}"
			columns="1">
			<h:panelGrid columns="6" columnClasses="width10, width10,width10, width10, width20, width20" width="100%">
				<h:outputText value="#{messages['evaluation.conference.tablePanel.fromDate']}"/>
				<p:selectOneMenu value="#{evaluationConferenceRecordsManagedBean.fromDate}">
            		<f:selectItems value="#{evaluationConferenceRecordsManagedBean.dateRange}"/>
    			</p:selectOneMenu>
				<h:outputText value="#{messages['evaluation.conference.tablePanel.toDate']}"/>
				<p:selectOneMenu value="#{evaluationConferenceRecordsManagedBean.toDate}">
            		<f:selectItems value="#{evaluationConferenceRecordsManagedBean.dateRange}"/>
    			</p:selectOneMenu>
    			<p:selectOneMenu
					value="#{evaluationConferenceRecordsManagedBean.classifications}" 
					>
					<f:selectItem 
							itemValue="all"
							itemLabel="#{messages['evaluation.conference.tablePanel.category.allConferences']}" />
					<f:selectItem 
							itemValue="evaluatedConferences"
							itemLabel="#{messages['evaluation.conference.tablePanel.category.evaluatedConferences']}" />
					<f:selectItem 
							itemValue="notEvaluatedConferences"
							itemLabel="#{messages['evaluation.conference.tablePanel.category.notEvaluatedConferences']}" />
				</p:selectOneMenu>
				<p:commandButton
					action="#{evaluationConferenceRecordsManagedBean.filterConferences}" 
					value="#{messages['evaluation.conference.tablePanel.btnFilterConferences']}"
					update="evaluationConferenceTablePanel"
					execute="@form" 
					limitRender="true"/>
			</h:panelGrid>
		</h:panelGrid>
		<p:dataTable
			id="evaluationConferenceTable"
			value="#{evaluationConferenceRecordsManagedBean.conferences}" 
			var="conferenceRow"
			rows="10" 
			rendered="#{not empty evaluationConferenceRecordsManagedBean.commissionNumber}"
			paginator="true" paginatorPosition="bottom"
			paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
			currentPageReportTemplate="#{userManagedBean.currentPageReportTemplate}"
			rowsPerPageTemplate="#{userManagedBean.rowsPerPageTemplate}" >
			<!--     ........  name   .......-->
			<p:column
				styleClass="ui-datatable-wide-cell" >
				<f:facet name="header">
					<p:commandLink
						action="#{evaluationConferenceRecordsManagedBean.sort}"
						render="evaluationConferenceTablePanel"
						limitRender="true"
						execute="@this"
						immediate="true" >
						<h:outputText
							value="#{messages['evaluation.conference.tablePanel.name']}" />
						<h:graphicImage library="img" name="up.gif"
							rendered="#{(conferenceManagedBean.orderBy=='conference.someName') and (conferenceManagedBean.direction=='asc')}" />
						<h:graphicImage library="img" name="down.gif"
							rendered="#{(conferenceManagedBean.orderBy=='conference.someName') and (conferenceManagedBean.direction=='desc')}" />
						<f:param name="orderBy" value="conference.someName" />
					</p:commandLink>
				</f:facet>
				<h:outputText value="#{conferenceRow.conference.someName}" />
			</p:column>
			<!--     ........  place   .......-->
			<p:column
				>
				<f:facet name="header">
					<p:commandLink
						action="#{evaluationConferenceRecordsManagedBean.sort}"
						render="evaluationConferenceTablePanel"
						limitRender="true"
						execute="@this"
						immediate="true" >
						<h:outputText
							value="#{messages['evaluation.conference.tablePanel.place']}" />
						<h:graphicImage library="img" name="up.gif"
							rendered="#{(conferenceManagedBean.orderBy=='conference.place') and (conferenceManagedBean.direction=='asc')}" />
						<h:graphicImage library="img" name="down.gif"
							rendered="#{(conferenceManagedBean.orderBy=='conference.place') and (conferenceManagedBean.direction=='desc')}" />
						<f:param name="orderBy" value="conference.place" />
					</p:commandLink>
				</f:facet>
				<h:outputText value="#{conferenceRow.conference.place}" />
			</p:column>
			<!--     ........  year  .......-->
			<p:column
				>
				<f:facet name="header">
					<p:commandLink
						action="#{evaluationConferenceRecordsManagedBean.sort}"
						render="evaluationConferenceTablePanel"
						limitRender="true"
						execute="@this"
						immediate="true" >
						<h:outputText
							value="#{messages['evaluation.conference.tablePanel.year']}" />
						<h:graphicImage library="img" name="up.gif"
							rendered="#{(conferenceManagedBean.orderBy=='conference.year') and (conferenceManagedBean.direction=='asc')}" />
						<h:graphicImage library="img" name="down.gif"
							rendered="#{(conferenceManagedBean.orderBy=='conference.year') and (conferenceManagedBean.direction=='desc')}" />
						<f:param name="orderBy" value="conference.year" />
					</p:commandLink>
				</f:facet>
				<h:outputText value="#{conferenceRow.conference.year}" />
			</p:column>
			<!--     ........  papers   .......-->
			<p:column
				>
				<f:facet name="header">
					<h:outputText
						value="#{messages['evaluation.conference.tablePanel.papers']}" />
				</f:facet>
				<p:commandLink
					render="relatedRecordsEditModalPanel"
				    execute="@this" 
				    limitRender="true">
				    <h:graphicImage library="img" name="publications.png" />
				    <f:setPropertyActionListener target="#{relatedRecordsManagedBean.selectedRecord}"
				        value="#{conferenceRow.conference}" />
				</p:commandLink>
			</p:column>
			<!--     ........  category  .......-->
			<p:column
				>
				<f:facet name="header">
					<p:commandLink
						action="#{evaluationConferenceRecordsManagedBean.sort}"
						render="evaluationConferenceTablePanel"
						limitRender="true"
						execute="@this"
						immediate="true" >
						<h:outputText
							value="#{messages['evaluation.conference.tablePanel.category']}" />
						<h:graphicImage library="img" name="up.gif"
							rendered="#{(conferenceManagedBean.orderBy=='classification') and (conferenceManagedBean.direction=='asc')}" />
						<h:graphicImage library="img" name="down.gif"
							rendered="#{(conferenceManagedBean.orderBy=='classification') and (conferenceManagedBean.direction=='desc')}" />
						<f:param name="orderBy" value="classification" />
					</p:commandLink>
				</f:facet>
				<p:selectOneMenu
					value="#{conferenceRow.classification}" 
					disabled="#{((not userManagedBean.privileges[privilegesManagedBean.formEvaluationConference][privilegesManagedBean.add]) or (not evaluationConferenceRecordsManagedBean.canSave()))}"
					>
					<f:selectItem 
							itemValue="a"
							itemLabel="" />
					<f:selectItem 
							itemValue="nationalConference"
							itemLabel="#{messages['evaluation.conference.tablePanel.category.nationalConference']}" />
					<f:selectItem 
							itemValue="internationalConference"
							itemLabel="#{messages['evaluation.conference.tablePanel.category.internationalConference']}" />
					<f:selectItem 
							itemValue="notConference"
							itemLabel="#{messages['evaluation.conference.tablePanel.category.notConference']}" />
				</p:selectOneMenu>
			</p:column>
		</p:dataTable>
		<h:panelGrid columns="1">
			<p:commandButton
				action="#{evaluationConferenceRecordsManagedBean.saveEvaluations}"
				value="#{messages['evaluation.conference.tablePanel.btnEvaluate']}"
				update="evaluationConferenceTableFormPanel"
				rendered="#{((userManagedBean.privileges[privilegesManagedBean.formEvaluationConference][privilegesManagedBean.add]) and (evaluationConferenceRecordsManagedBean.canSave()))}"
				limitRender="true"  
			/>
		</h:panelGrid>
	</h:panelGrid>
</ui:composition>
