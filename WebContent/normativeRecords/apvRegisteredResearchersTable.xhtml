<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:mytags="http://dragan.tmd.uns.ac.rs/mytags"
     xmlns:fn="http://java.sun.com/jsp/jstl/functions"
     >
     <h:outputStylesheet>
        .rbr-column {
        	text-align:right;        	
        }
        
        .active-row {
        background-color: #FFEBDA !important;
        cursor: pointer;
        }
 
           </h:outputStylesheet>     

	<!-- ===========================   searchPanel  ============================= -->
	<p:spacer
		height="10"
		width="1"
		/>
    <h:form id="apvRegisteredResearchersTableForm">
		<h:panelGrid
			id="apvRegisteredResearchersSearchPanel"
			columns="4"
			rendered="true">
			<!--  <mytags:outputLabel
				value="#{messages['records.apvRegisteredResearchers.searchPanel.APVNTnumber']}"
				for="whereAPVNT"
				errorStyleClass="errorMessage"
				/>

				<p:inputText
					id="whereAPVNT"
					onkeydown="keyDownHandler(event, 'apvRegisteredResearchersTableForm:btnFind')"
					value="#{apvRegisteredResearchersManagedBean.filterAPVNT}"
					styleClass="searchBox" />
			-->
			<mytags:outputLabel
			value="#{messages['records.apvRegisteredResearchers.searchPanel.firstName']}"
			for="whereFirstname"
			errorStyleClass="errorMessage"
			/>

			<p:inputText
				id="whereFirstname"
				onkeydown="keyDownHandler(event, 'apvRegisteredResearchersTableForm:btnFind')"
				value="#{apvRegisteredResearchersManagedBean.filterFirstname}"
				styleClass="searchBox" />

			<h:outputText/>

			<h:outputText/>

			<mytags:outputLabel
				value="#{messages['records.apvRegisteredResearchers.searchPanel.lastName']}"
				for="whereLastname"
				errorStyleClass="errorMessage"
				/>

			<p:inputText
				id="whereLastname"
				onkeydown="keyDownHandler(event, 'apvRegisteredResearchersTableForm:btnFind')"
				value="#{apvRegisteredResearchersManagedBean.filterLastname}"
				styleClass="searchBox" />

			<p:commandButton
					id="btnFind"
					title="#{messages['records.apvRegisteredResearchers.searchPanel.btnFind']}"
					action="#{apvRegisteredResearchersManagedBean.btnFind}"
					update="@form"
					execute="@form"
					icon="pi pi-filter"
					styleClass="rounded-button ui-button-flat" />

			<p:commandButton
					id="btnShowAll"
					action="#{organizationProfileManagedBean.btnShowAll}"
					title="#{messages['records.apvRegisteredResearchers.searchPanel.btnShowAll']}"
					update="@form"
					execute="@form"
					icon="pi pi-filter-slash"
					styleClass="rounded-button ui-button-flat" />

		</h:panelGrid>

	<p:panel
		id="scrollableBody" 
		styleClass="scrollableBody"
		rendered="#{(not empty apvRegisteredResearchersManagedBean.authors) or (not apvRegisteredResearchersManagedBean.customPick)}">
		
		<!-- ===========================   tablePanel  ============================= -->
		<p:spacer
			height="10"
			width="1"
			/>
		<h:panelGrid>
			<p:dataTable
				id="apvRegisteredResearchersTable" 
				value="#{apvRegisteredResearchersManagedBean.authors}"
				var="apvRegisteredResearchersRow"
				rowKeyVar="apvRegisteredResearchersRowKey" 
				rows="10"
				styleClass="stable" tableStyle="width:auto"
				paginator="true" paginatorPosition="bottom"
				paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				currentPageReportTemplate="#{userManagedBean.currentPageReportTemplate}"
				rowsPerPageTemplate="#{userManagedBean.rowsPerPageTemplate}"
				>
				<!--     ........  counter   .......-->
				<p:column
					styleClass="rbr-column" >						
					<f:facet name="header">
						<h:outputText value="#{messages['records.apvRegisteredResearchers.tablePanel.counter']}" />
					</f:facet>
					<h:outputText value="#{apvRegisteredResearchersRowKey + 1}." 
						/>
				</p:column>
				
				<!--     ........  APVNT broj    .......
				<p:column>
					<f:facet name="header">					
						<h:outputText value="#{messages['records.apvRegisteredResearchers.tablePanel.APVNTnumber']}" />											
					</f:facet>
					<h:outputText value="#{apvRegisteredResearchersRow.apvnt}" />
				</p:column> -->
				
				<!--     ........  Names   .......-->
				<p:column styleClass="ui-datatable-wide-cell">
					<f:facet name="header">						
						<h:outputText value="#{messages['records.apvRegisteredResearchers.tablePanel.names']}" />						
					</f:facet>
					<h:outputText value="#{apvRegisteredResearchersRow.names}" />
				</p:column>
				
				<!--     ........  First name   .......
				<p:column styleClass="ui-datatable-wide-cell">
					<f:facet name="header">					
						<h:outputText value="#{messages['records.apvRegisteredResearchers.tablePanel.firstName']}" />				
					</f:facet>
			      <h:outputText value="#{apvRegisteredResearchersRow.name.firstname}" />
				</p:column> -->
			
				<!--     ........  position   .......-->
				<p:column
					styleClass="ui-datatable-wide-cell" >
					<f:facet name="header">						
						<h:outputText value="#{messages['records.apvRegisteredResearchers.tablePanel.position']}" />					
					</f:facet>
					<h:outputText value="#{apvRegisteredResearchersRow.currentPositionName}" />
				</p:column>
					
				<!--     ........  institution   .......-->
				<p:column
					styleClass="ui-datatable-wide-cell" >
					<f:facet name="header">						
						<h:outputText value="#{messages['records.apvRegisteredResearchers.tablePanel.institution']}" />					
					</f:facet>
					<h:outputText value="#{apvRegisteredResearchersRow.institutionName}" />
				</p:column>
				
				<!--     ........  actions   .......-->
				<p:column style="text-align:center;">
					<f:facet name="header">
						<h:outputText
							value="#{messages['records.apvRegisteredResearchers.tablePanel.karton']}" />
					</f:facet>
					<p:commandLink
						action="#{apvRegisteredResearchersManagedBean.switchToViewDetailsMode}"
						update="mainPanel, apvRegisteredResearchersViewDetailsForm"
						immediate="true">
						<h:graphicImage library="img" name="knrPublic.gif"/>
						<f:param name="controlNumber" value="#{apvRegisteredResearchersRow.controlNumber}" />
					</p:commandLink>
				</p:column>
			</p:dataTable>
		</h:panelGrid>
	</p:panel>
	</h:form>
	<script>
		$(function() {
			$('.stable tr').mouseover(function(){
				jQuery(this).addClass('active-row')
			})
			$('.stable tr').mouseout(function(){
				jQuery(this).removeClass('active-row')
			})
		});
	</script>
</ui:composition>
