<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:mytags="http://dragan.tmd.uns.ac.rs/mytags">

	<h:panelGrid id="authorNameFormatsFormPanel">
		<p:inputText id="general" rendered="false" value="" />
		<p:outputPanel ajaxRendered="true">
			<p:message
				for="general"
				errorClass="errorMessage"
				infoClass="infoMessage"
				warnClass="warnMessage"
				fatalClass="fatalMessage"/>
		</p:outputPanel>
		<!-- .......Author.......           -->
		<p:panel id="authorNameFormatsPreview"
			header="#{messages['records.author.editPanel.nameTablePanel.header']}">
			<p:dataTable id="authorNameTable"
				value="#{authorManagedBean.selectedAuthor.allNames}"
				var="authorNameRow">
				<!--     ........  name   .......-->
				<p:column>
					<f:facet name="header">
						<h:outputText
							value="#{messages['records.author.editPanel.nameTablePanel.name']}" />
					</f:facet>
					<h:outputText value="#{authorNameRow}" />
				</p:column>
				<!--     ........  change position   .......-->
				<p:column rendered="#{userManagedBean.privileges[privilegesManagedBean.formAuthor][privilegesManagedBean.editFullData]}">
					<f:facet name="header">
						<h:outputText
							value="#{messages['records.author.editPanel.nameTablePanel.changePosition']}" />
					</f:facet>
					<p:commandLink action="#{authorManagedBean.moveAuthorNameUp}"
						render="authorNameTable"
						limitRender="true"
						execute="@this">
						<h:graphicImage library="img" name="up.gif" />
						<f:param name="firstname" value="#{authorNameRow.firstname}" />
						<f:param name="lastname" value="#{authorNameRow.lastname}" />
					</p:commandLink>
					<p:commandLink action="#{authorManagedBean.moveAuthorNameDown}"
						render="authorNameTable"
						limitRender="true"
						execute="@this">
						<h:graphicImage library="img" name="down.gif" />
						<f:param name="firstname" value="#{authorNameRow.firstname}" />
						<f:param name="lastname" value="#{authorNameRow.lastname}" />
					</p:commandLink>
				</p:column>
				<!--     ........  remove name   .......-->
				<p:column rendered="#{userManagedBean.privileges[privilegesManagedBean.formAuthor][privilegesManagedBean.editFullData]}">
					<f:facet name="header">
						<h:outputText
							value="#{messages['records.author.editPanel.nameTablePanel.remove']}" />
					</f:facet>
					<p:commandLink action="#{authorManagedBean.removeAuthorName}"
						render="authorNameFormatsModalPanel"
						immediate="true"
						limitRender="true"
						execute="@this"
						rendered="#{authorNameRow != authorManagedBean.selectedAuthor.name}">
						<h:graphicImage library="img" name="delete.png" />
						<f:param name="firstname" value="#{authorNameRow.firstname}" />
						<f:param name="lastname" value="#{authorNameRow.lastname}" />
					</p:commandLink>
				</p:column>
			</p:dataTable>
		</p:panel>
		<p:panel
			id="scrollableBody" 
			rendered="#{authorManagedBean.editTabNumber lt 1}"
			styleClass="scrollableBody"	>
			<p:tabView
				switchType="#{(authorManagedBean.editMode == modesManagedBean.viewDetails)?'client':'ajax'}" 
				activeItem="#{authorManagedBean.activeEditTab}" >
				<p:tab
					name="tab0"
					header="#{messages['records.author.editPanel.firstTab']}"
					rendered="#{authorManagedBean.editTabNumber == 0}">
					<!-- ===========================   tablePanel  ============================= -->
					<h:panelGrid 
						rendered="#{(authorManagedBean.editMode != modesManagedBean.viewDetails)}" 
						columns="5" 
						columnClasses="width20, width30, width10, width10, width30"
						width="100%">
						<!-- ....... Lastname other format.......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.author.editPanel.lastname']}*" 
								for="lastname" 
								errorStyleClass="errorMessage" />
						</p:outputPanel>
						<p:inputText
							id="lastname"
							value="#{authorManagedBean.lastnameOtherFormat}" 
							maxlength="100" 
							required="true"/>
						<h:outputText value=""  />
						<h:outputText value=""  />
						<p:outputPanel ajaxRendered="true" >
							<p:message
								for="lastname" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... Firstname other format.......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.author.editPanel.firstname']}*" 
								for="firstname" 
								errorStyleClass="errorMessage" />
						</p:outputPanel>
						<p:inputText
							id="firstname"
							value="#{authorManagedBean.firstnameOtherFormat}" 
							maxlength="100" 
							required="true"/>
						<h:outputText value="" />
						<h:outputText value=""  />
						<p:outputPanel ajaxRendered="true" >
							<p:message
								for="firstname" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
					</h:panelGrid>
				</p:tab>
			</p:tabView>
		</p:panel>
		<!--================= Update, Create, Cancel buttons ====================  -->
		<h:panelGrid columns="2">
			<p:commandButton
				rendered="#{(authorManagedBean.editMode == modesManagedBean.addFormatName) and (authorManagedBean.editTabNumber == 0) }"
				action="#{authorManagedBean.addName}"
				value="#{messages['records.author.nameFormatsPanel.btnAddName']}"
				update="authorNameFormatsModalPanel"
				limitRender="true" 
				execute="@form" />
			<p:commandButton
				rendered="#{(authorManagedBean.editTabNumber == 1)}" 
				action="#{authorManagedBean.finishWizard}"
				value="#{messages['records.author.nameFormatsPanel.btnAllRight']}"
				update="mainPanel, #{authorManagedBean.renderModalPanels}"
				limitRender="true"
				immediate="true" 
				execute="@this" />
		</h:panelGrid>
	</h:panelGrid>	
</ui:composition>
