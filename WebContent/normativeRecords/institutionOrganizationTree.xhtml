<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:mytags="http://dragan.tmd.uns.ac.rs/mytags">
     
	<h:panelGrid id="institutionTreePanel">
	          	
		<p:tree
			id="richTreeInstitutionTreePanel"
			value="#{searchManagedBean.root}"
			var="institutionNode"
			dynamic="true"
			nodeType="#{institutionNode.tree_state}"
            render="@this"
            execute="@form"
	        >
            	<rich:treeSelectionChangeListener 
            		listener="#{searchManagedBean.selectionChanged}" 
            		/>
	          	<p:treeNode
				iconCollapsed="/resources/img/institution.jpg"
				iconExpanded="/resources/img/institution.jpg"
				iconLeaf="/resources/img/institution.jpg"
				type="empty"
				expanded="#{institutionNode.expanded}"
				>
					<h:graphicImage value="/resources/img/ce16.jpg"/>
					<h:outputText value="#{institutionNode}"/>
				</p:treeNode>
				
				<p:treeNode
				iconCollapsed="/resources/img/institution.jpg"
				iconExpanded="/resources/img/institution.jpg"
				iconLeaf="/resources/img/institution.jpg"
				type="full"
				expanded="#{institutionNode.expanded}"
				>
					<h:graphicImage value="/resources/img/cf16.jpg" />
					<h:outputText value="#{institutionNode}"/>
				</p:treeNode>
				
				<p:treeNode
				iconCollapsed="/resources/img/institution.jpg"
				iconExpanded="/resources/img/institution.jpg"
				iconLeaf="/resources/img/institution.jpg"
				type="partial"
				expanded="#{institutionNode.expanded}"
				>
					<h:graphicImage value="/resources/img/cp16.jpg" />
					<h:outputText value="#{institutionNode}"/>
				</p:treeNode>
        </p:tree>
	</h:panelGrid>
	
	</ui:composition>
	