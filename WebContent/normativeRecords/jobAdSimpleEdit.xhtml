<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:mytags="http://dragan.tmd.uns.ac.rs/mytags">

	<h:panelGrid id="jobAdSimpleEditFormPanel">
		<p:inputText id="general" rendered="false" value="" />
		<p:outputPanel ajaxRendered="true">
			<p:message
				for="general"
				errorClass="errorMessage"
				infoClass="infoMessage"
				warnClass="warnMessage"
				fatalClass="fatalMessage"/>
		</p:outputPanel>
		<!-- .......JobAdPreview.......           -->
		<p:panel id="jobAdPreview"
			header="#{messages['records.jobAd.editPanel.preview']}"
			rendered="#{jobAdManagedBean.editTabNumber == 2}">
			<h:panelGrid columns="1">
				<h:outputText
					value="#{jobAdManagedBean.selectedJobAd.HTMLRepresentation}"
					styleClass="preview" 
					escape="false"/>
			</h:panelGrid>
		</p:panel>
		<p:panel
			id="scrollableBody"
			styleClass="scrollableBody" 
			rendered="#{(jobAdManagedBean.editTabNumber == 0)}" >
			<h:panelGrid columns="4" columnClasses="width20, width60, width10, width10" width="100%">
				<!-- ....... Place .......           -->
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['records.jobAd.editPanel.place']}*" 
						for="place" 
						errorStyleClass="errorMessage" />
				</p:outputPanel>
				<p:inputTextarea
					id="place"
					readonly="#{(jobAdManagedBean.editMode == modesManagedBean.viewDetails)}" 
					value="#{jobAdManagedBean.selectedJobAd.place}"
					rows="3" 
					style="width:100% !important"/>
				<h:outputText value="" />
				<p:outputPanel ajaxRendered="true">
					<p:message
						for="place" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... Institution.......           
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['records.jobAd.editPanel.institution']}*" 
						for="institution" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:selectOneMenu
					id="institution"
					value="#{jobAdManagedBean.selectedJobAd.institution}"
					required="true"
					converter="institutionSelectConverter"
					disabled="#{(jobAdManagedBean.editMode == modesManagedBean.viewDetails)}"
					>
					<f:selectItems value="#{institutionManagedBean.allList}"/>
				</p:selectOneMenu>
				<h:outputText value="" />
				<p:outputPanel ajaxRendered="true">
					<p:message
						for="institution" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel> -->
				<!-- ....... startDate.......           -->
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['records.jobAd.editPanel.startDate']}*" 
						for="startDate" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:calendar
					id="startDate"
					value="#{jobAdManagedBean.startDate}"
					enableManualInput="true"
					datePattern="dd/MM/yyyy"
					firstWeekDay="1"
					showFooter="false"
					showWeekDaysBar="false"
					showWeeksBar="false" 
					inputStyle="width:120px" 
					disabled="#{(jobAdManagedBean.editMode == modesManagedBean.viewDetails)}" />
				<h:outputText value=""  />
				<p:outputPanel ajaxRendered="true" >
					<p:message
						for="startDate" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... endDate.......           
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['records.jobAd.editPanel.endDate']}*" 
						for="endDate" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:calendar
					id="endDate"
					value="#{jobAdManagedBean.endDate}"
					enableManualInput="true"
					datePattern="dd/MM/yyyy"
					firstWeekDay="1"
					showFooter="false"
					showWeekDaysBar="false"
					showWeeksBar="false" 
					inputStyle="width:120px" 
					disabled="#{(jobAdManagedBean.editMode == modesManagedBean.viewDetails)}" />
				<h:outputText value=""  />
				<p:outputPanel ajaxRendered="true" >
					<p:message
						for="endDate" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel> -->
				<!-- ....... Name .......           -->
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['records.jobAd.simpleEditPanel.name']}*" 
						for="name" 
						errorStyleClass="errorMessage" />
				</p:outputPanel>
				<p:inputTextarea
					id="name"
					readonly="#{(jobAdManagedBean.editMode == modesManagedBean.viewDetails)}" 
					value="#{jobAdManagedBean.selectedJobAd.name.content}"
					rows="3" 
					style="width:100% !important"/>
				<h:outputText value="" />
				<p:outputPanel ajaxRendered="true">
					<p:message
						for="name" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
			</h:panelGrid>
		</p:panel>
		<p:panel
			header="#{messages['records.jobAd.editPanel.secondTab']}"
			rendered="#{(jobAdManagedBean.editTabNumber == 1) and (jobAdManagedBean.editMode == modesManagedBean.add)}">
			<p:outputPanel ajaxRendered="true">
				<h:panelGrid columns="2">
					<h:graphicImage library="img" name="info.png" />
					<h:outputText value="#{jobAdManagedBean.pickSimilarMessage}"
						styleClass="ui-message-info" />
				</h:panelGrid>
			</p:outputPanel>
			<p:spacer
				height="10"
				width="1"
				/>
			<p:dataTable
				id="jobAdTable" 
				value="#{jobAdManagedBean.similarJobAds}"
				var="jobAdRow" >
				<!--     ........  stringRepresentation   .......-->
				<p:column >
					<f:facet name="header">
						<h:outputText
							value="#{messages['records.jobAd.tablePanel.stringRepresentation']}" />
					</f:facet>
					<h:outputText value="#{jobAdRow.stringRepresentation}" />
				</p:column>
				<!--     ........  chooseSimilar   .......-->
				<p:column>
					<f:facet name="header">
						<h:outputText
							value="#{messages['records.jobAd.tablePanel.chooseSimilar']}" />
					</f:facet>
					<p:commandLink
						action="#{jobAdManagedBean.chooseSimilar}"
						render="mainPanel, #{jobAdManagedBean.renderModalPanels}"
						limitRender="true"
						immediate="true"
						execute="@this">
						<h:graphicImage library="img" name="pick.png" />
						<f:param name="controlNumber" value="#{jobAdRow.controlNumber}" />
						<p:tooltip followMouse="true" direction="topRight"
							showDelay="1000" styleClass="tooltip" mode="client">
							<span class="tooltipSpan"> 
								<h:panelGrid columns="2">
									<h:graphicImage library="img" name="pickToolTip.png" />
									<h:outputText
										value="#{messages['records.jobAd.tablePanel.btnPick']}" />
								</h:panelGrid> 
							</span>
						</p:tooltip>
					</p:commandLink>
					<p:commandLink
						render="relatedRecordsEditModalPanel"
					    execute="@this" 
					    limitRender="true">
					    <h:graphicImage library="img" name="publications.png" />
					    <f:setPropertyActionListener target="#{relatedRecordsManagedBean.selectedRecord}"
					        value="#{jobAdRow}" />
						<p:tooltip followMouse="true" direction="topRight"
							showDelay="1000" styleClass="tooltip" mode="client">
							<span class="tooltipSpan"> 
								<h:panelGrid columns="2">
									<h:graphicImage library="img" name="publicationsToolTip.png" />
									<h:outputText
										value="#{messages['records.jobAd.tablePanel.btnPublications']}" />
								</h:panelGrid> 
							</span>
						</p:tooltip>
					</p:commandLink>
				</p:column>
			</p:dataTable>
		</p:panel>
		<!--================= Update, Create, Cancel buttons ====================  -->
		<h:panelGrid columns="2">
			<p:commandButton
				rendered="#{(jobAdManagedBean.editMode == modesManagedBean.update) and ((jobAdManagedBean.editTabNumber == 0) or (jobAdManagedBean.editTabNumber == 1))}"
				action="#{jobAdManagedBean.update}"
				value="#{messages['records.jobAd.editPanel.btnUpdate']}"
				render="jobAdSimpleEditModalPanel" 
				limitRender="true" 
				execute="@form" />
			<p:commandButton
				rendered="#{(jobAdManagedBean.editMode == modesManagedBean.add) and ((jobAdManagedBean.editTabNumber == 0) or (jobAdManagedBean.editTabNumber == 1))}"
				action="#{jobAdManagedBean.add}"
				value="#{messages['records.jobAd.editPanel.btnCreate']}"
				render="jobAdSimpleEditModalPanel" 
				limitRender="true" 
				execute="@form" />
			<p:commandButton
				rendered="#{(jobAdManagedBean.editTabNumber == 0) and (userManagedBean.privileges[privilegesManagedBean.formJobAd][privilegesManagedBean.editFullData])}" 
				action="#{jobAdManagedBean.switchSimple}"
				value="#{messages['records.jobAd.editPanel.btnAdvancedEdit']}"
				render="jobAdSimpleEditModalPanel, jobAdEditModalPanel" 
				execute="@form" />
			<p:commandButton
				rendered="#{(jobAdManagedBean.editTabNumber == 2)}" 
				action="#{jobAdManagedBean.finishWizard}"
				value="#{messages['records.jobAd.editPanel.btnAllRight']}"
				render="mainPanel, #{jobAdManagedBean.renderModalPanels}"
				limitRender="true"
				immediate="true" 
				execute="@this"/>
		</h:panelGrid>
	</h:panelGrid>
</ui:composition>