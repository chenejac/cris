<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:mytags="http://dragan.tmd.uns.ac.rs/mytags">

	<p:panel id="publicationPreview"
		header="#{messages['records.apvRegisteredResearcher.report.publications.preview']}">
		<p:inputText id="general" rendered="false" value="" />
		<p:outputPanel ajaxRendered="true">
			<p:message
				for="general"
				errorClass="errorMessage"
				infoClass="infoMessage"
				warnClass="warnMessage"
				fatalClass="fatalMessage"/>
		</p:outputPanel>
		
		<p:outputPanel ajaxRendered="true">
			<h:panelGrid columns="2" id="apvRegisteredResearcherShortDetailsPanelGrid" columnClasses="width20, width80" style="align:left" >
	    		<h:outputText value="#{messages['records.apvRegisteredResearcher.viewDetails.person.lastname']}"/>
	    		<h:outputText value="#{apvRegisteredResearchersManagedBean.selectedAuthor.name.lastname}" style="font-weight:bold"/>
	    		<h:outputText value="#{messages['records.apvRegisteredResearcher.viewDetails.person.firstname']}"/>
	    		<h:outputText value="#{apvRegisteredResearchersManagedBean.selectedAuthor.name.firstname}" style="font-weight:bold"/>
	    		<h:outputText value="#{messages['records.apvRegisteredResearcher.viewDetails.person.organisation']}"/>
	    		<h:outputText value="#{apvRegisteredResearchersManagedBean.selectedAuthor.institutionName}" style="font-weight:bold"/>	 
	    		<h:outputText value="#{messages['records.apvRegisteredResearcher.viewDetails.person.APVNTnumber']}"/>
	    		<h:outputText value="#{apvRegisteredResearchersManagedBean.selectedAuthor.apvnt}" style="font-weight:bold"/>	  				
	    	</h:panelGrid>
		</p:outputPanel>
	</p:panel>
	<p:panel
		id="scrollableBody"
		styleClass="scrollableBody"
		>	
			<h:panelGrid 
				rendered="#{not empty apvRegisteredResearchersManagedBean.publications}"
				>
				<p:dataTable
					id="publicationTable"
					value="#{apvRegisteredResearchersManagedBean.publications}"
					var="publicationRow" 
					rows="10"
					paginator="true" paginatorPosition="bottom"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					currentPageReportTemplate="#{userManagedBean.currentPageReportTemplate}"
					rowsPerPageTemplate="#{userManagedBean.rowsPerPageTemplate}"
					>
					<p:column>
						<f:facet name="header">
							<h:outputText
								value="#{messages['records.apvRegisteredResearcher.report.publications.category']}" />
						</f:facet>
						<h:outputText value="#{publicationRow.resultEvaluation.resultType.classId}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText
								value="#{messages['records.apvRegisteredResearcher.report.publications.record']}" />
						</f:facet>
						<h:outputText value="#{publicationRow.publication.stringRepresentation}" />
					</p:column>
					<p:column >
						<f:facet name="header">
							<h:outputText
								value="#{messages['records.apvRegisteredResearcher.report.publications.actions']}" />
						</f:facet>
						<p:selectBooleanCheckbox value="#{publicationRow.selected}" />
					</p:column>
				</p:dataTable>
			</h:panelGrid>
			<h:panelGrid 
				rendered="#{empty apvRegisteredResearchersManagedBean.publications}">
				<h:outputText
					value="#{messages['records.apvRegisteredResearcher.report.publications.norecords']}"
					styleClass="rf-msg-inf" />
			</h:panelGrid>
	</p:panel>
	<!--=================command buttons ====================  -->
	<h:panelGrid 
		columns="4"
		id="commands"
		>
		<p:commandButton
			action="#{apvRegisteredResearchersManagedBean.generateReport}"
			value="#{messages['records.apvRegisteredResearcher.report.publications.btnGenerate']}"
			update="commands"
			limitRender="true" 
			execute="@form" />
		<p:commandLink ajax="false"
			action="#{apvRegisteredResearchersManagedBean.getReport}"			
			disabled="#{empty apvRegisteredResearchersManagedBean.wordMLPackage}"
			target="_blank"
			>
			<h:button 
				value="#{messages['records.apvRegisteredResearcher.report.publications.btnDownload']}"
				disabled="#{empty apvRegisteredResearchersManagedBean.wordMLPackage}"
			/>
		</p:commandLink>
		<p:commandButton
			action="#{apvRegisteredResearchersManagedBean.selectAllPublications}"
			value="#{messages['records.apvRegisteredResearcher.report.publications.btnSelectAll']}"
			update="scrollableBody"
			limitRender="true" 
			execute="this" />
		<p:commandButton
			action="#{apvRegisteredResearchersManagedBean.deselectAllPublications}"
			value="#{messages['records.apvRegisteredResearcher.report.publications.btnDeselectAll']}"
			update="scrollableBody"
			limitRender="true" 
			execute="this" />
	</h:panelGrid>
</ui:composition>