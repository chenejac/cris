<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:mytags="http://dragan.tmd.uns.ac.rs/mytags"
     xmlns:fn="http://java.sun.com/jsp/jstl/functions"
     >
     <h:outputStylesheet>
        .rbr-column {
        	text-align:right;        	
        }
        
        .active-row {
        background-color: #FFEBDA !important;
        cursor: pointer;
        }
 
           </h:outputStylesheet>     

	<!-- ===========================   searchPanel  ============================= -->
	<p:spacer
		height="10"
		width="1"
		/>
	<h:panelGrid
			id="organizationResearchersSearchPanel"
			columns="4"
			rendered="true">
		<!--  <mytags:outputLabel
			value="#{messages['records.apvRegisteredResearchers.searchPanel.APVNTnumber']}"
			for="whereAPVNT"
			errorStyleClass="errorMessage"
			/>

			<p:inputText
				id="whereAPVNT"
				onkeydown="keyDownHandler(event, 'apvRegisteredResearchersTableForm:btnFind')"
				value="#{apvRegisteredResearchersManagedBean.filterAPVNT}"
				styleClass="searchBox" />
		-->
		<mytags:outputLabel
				value="#{messages['records.apvRegisteredResearchers.searchPanel.firstName']}"
				for="whereFirstname"
				errorStyleClass="errorMessage"
		/>

		<p:inputText
				id="whereFirstname"
				onkeydown="keyDownHandler(event, 'organizationPageForm:btnFindResearchers')"
				value="#{organizationProfileManagedBean.filterFirstname}"
				styleClass="searchBox" />

		<h:outputText/>
		<h:outputText/>

		<mytags:outputLabel
				value="#{messages['records.apvRegisteredResearchers.searchPanel.lastName']}"
				for="whereLastname"
				errorStyleClass="errorMessage"
		/>

		<p:inputText
				id="whereLastname"
				onkeydown="keyDownHandler(event, 'organizationPageForm:btnFindResearchers')"
				value="#{organizationProfileManagedBean.filterLastname}"
				styleClass="searchBox" />

		<p:commandButton
				id="btnFindResearchers"
				title="#{messages['records.apvRegisteredResearchers.searchPanel.btnFind']}"
				action="#{apvRegisteredResearchersManagedBean.btnFind}"
				update="@form"
				execute="@form"
				icon="pi pi-filter"
				styleClass="rounded-button ui-button-flat" />
		<p:commandButton
				id="btnShowAll"
				action="#{organizationProfileManagedBean.btnShowAll}"
				title="#{messages['records.apvRegisteredResearchers.searchPanel.btnShowAll']}"
				update="@form"
				execute="@form"
				icon="pi pi-filter-slash"
				styleClass="rounded-button ui-button-flat" />

	</h:panelGrid>
	<!-- ===========================   tablePanel  ============================= -->
	<p:panel
		id="organizationResearchersPanel"
		rendered="#{not empty organizationProfileManagedBean.researchers}">
		<p:spacer
			height="10"
			width="1"
			/>
		<h:panelGrid>
			<p:dataTable
				id="organizationResearchersTable"
				value="#{organizationProfileManagedBean.researchers}"
				var="researcherRow"
				rowIndexVar="researcherRowKey"
				rows="10"
				styleClass="stable"
				tableStyle="width:auto"
				paginator="true" paginatorPosition="bottom"
				paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				currentPageReportTemplate="#{userManagedBean.currentPageReportTemplate}"
				rowsPerPageTemplate="#{userManagedBean.rowsPerPageTemplate}"
				>
				<!--     ........  counter   .......-->
				<p:column styleClass="rbr-column">
					<f:facet name="header">
						<h:outputText
							value="#{messages['records.apvRegisteredResearchers.tablePanel.counter']}"
							style="font-size: 14px;"/>
					</f:facet>
					<h:outputText
						value="#{researcherRowKey + 1}."
						style="font-size: 14px;"/>
				</p:column>

				<!--     ........  Names   .......-->
				<p:column>
					<f:facet name="header">						
						<h:outputText
							value="#{messages['records.apvRegisteredResearchers.tablePanel.names']}"
							style="font-size: 14px;"
						/>
					</f:facet>
					<h:outputText
						value="#{researcherRow.names}"
						style="font-size: 14px;"
					/>
				</p:column>

				<!--     ........  position   .......-->
				<p:column>
					<f:facet name="header">
						<h:outputText
							value="#{messages['records.apvRegisteredResearchers.tablePanel.position']}"
							style="font-size: 14px;" />
					</f:facet>
					<h:outputText
						value="#{researcherRow.currentPositionName}"
						style="font-size: 14px;" />
				</p:column>
				
				<!--     ........  actions   .......-->
				<p:column style="text-align:center;">
					<f:facet name="header">
						<h:outputText
							value="#{messages['records.apvRegisteredResearchers.tablePanel.karton']}"
							style="font-size: 14px;" />
					</f:facet>
					<p:link outcome="researcherPage" >
						<p:button icon="pi pi-arrow-circle-right" styleClass="rounded-button ui-button-flat"/>
						<f:param name="researcher" value="#{researcherRow.controlNumber}" />
					</p:link>
				</p:column>
			</p:dataTable>
		</h:panelGrid>
		<script>
			$(function() {
				$('.stable tr').mouseover(function(){
					jQuery(this).addClass('active-row')
				})
				$('.stable tr').mouseout(function(){
					jQuery(this).removeClass('active-row')
				})
			});
		</script>
	</p:panel>
</ui:composition>
