<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:mytags="http://dragan.tmd.uns.ac.rs/mytags">


	<h:panelGrid id="monographEditFormPanel">	
		<p:inputText id="general" rendered="false" value="" />
		<p:outputPanel ajaxRendered="true">
			<p:message
				for="general"
				errorClass="errorMessage"
				infoClass="infoMessage"
				warnClass="warnMessage"
				fatalClass="fatalMessage"/>
		</p:outputPanel>
		<!-- .......Monograph.......           -->
		<p:panel id="monographPreview"
			header="#{messages['records.monograph.editPanel.preview']}"
			rendered="#{monographManagedBean.editTabNumber == 4}" >
			<p:outputPanel ajaxRendered="true">
				<h:panelGrid columns="1">
					<h:outputText
						value="#{monographManagedBean.selectedMonograph.stringRepresentation}"
						styleClass="preview" />
				</h:panelGrid>
			</p:outputPanel>
		</p:panel>
		<p:panel id="scrollableBody"
			rendered="#{monographManagedBean.editTabNumber lt 4}"
			styleClass="scrollableBody" >
			<p:panel id="monographFullPreview"
				header="#{messages['records.monograph.editPanel.preview']}"
				rendered="#{(monographManagedBean.editMode == modesManagedBean.import) and (monographManagedBean.editTabNumber != 4)}">
				<p:outputPanel ajaxRendered="true">
					<h:panelGrid columns="1">
						<h:outputText
							value="#{monographManagedBean.selectedMonograph.HTMLRepresentation}"
							styleClass="preview" 
							escape="false"/>
					</h:panelGrid>
				</p:outputPanel>
				<p:commandLink
					render="relatedRecordsEditModalPanel"
				    execute="@this" 
				    limitRender="true">
				    <h:graphicImage library="img" name="publications.png" />
				    <f:setPropertyActionListener target="#{relatedRecordsManagedBean.selectedRecord}"
				        value="#{monographManagedBean.selectedMonograph}" />
				    <p:tooltip followMouse="true" direction="topRight"
						showDelay="1000" styleClass="tooltip" mode="client">
						<span class="tooltipSpan"> 
							<h:panelGrid columns="2">
								<h:graphicImage library="img" name="publicationsToolTip.png" />
								<h:outputText
									value="#{messages['records.monograph.tablePanel.btnPublications']}" />
							</h:panelGrid> 
						</span>
					</p:tooltip>
				</p:commandLink>
			</p:panel>
			<p:tabView
				switchType="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)?'client':'ajax'}"
				activeItem="#{monographManagedBean.activeEditTab}">
				<p:tab
					name="tab0"
					rendered="#{(monographManagedBean.editTabNumber == 0) or (monographManagedBean.editMode == modesManagedBean.viewDetails)}"
					header="#{messages['records.monograph.editPanel.firstTab']}">
					<h:panelGrid columns="5" columnClasses="width20, width30, width10, width10, width30" width="100%">
						<!--  ...... Language ..... -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.titleLanguage']}*" 
								for="language" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:selectOneMenu
							id="language"
							disabled="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}"
							value="#{monographManagedBean.selectedMonograph.title.language}" 
							required="true"	>
							<ui:include src="../languagesSelectItems.xhtml"/>
						</p:selectOneMenu>
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="language" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... Title .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.title']}*" 
								for="title" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputTextarea
							id="title"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.title.content}"
							rows="3" 
							required="#{empty monographManagedBean.selectedMonograph.titleTranslations}" />
						<p:commandButton
							action="#{monographManagedBean.titleTranslations}"
							value="#{messages['records.monograph.editPanel.btnTitleTranslations']}"
							update="multilingualContentEditModalPanel"
							execute="@this"/>
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="title" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... Subtitle .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.subtitle']}" 
								for="subtitle" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputTextarea
							id="subtitle"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.subtitle.content}"
							rows="3" />
						<p:commandButton
							action="#{monographManagedBean.subtitleTranslations}"
							value="#{messages['records.monograph.editPanel.btnSubtitleTranslations']}"
							update="multilingualContentEditModalPanel"
							execute="@this"/>
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="subtitle" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... isbn .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.isbn']}" 
								for="isbn" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="isbn"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.isbn}"
							maxlength="30" />
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="isbn" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... numberOfPages .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.numberOfPages']}" 
								for="numberOfPages" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="numberOfPages"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.numberOfPages}" />
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="numberOfPages" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... dimension .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.dimension']}" 
								for="dimension" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="dimension"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.dimension}"
							maxlength="30"  />
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="dimension" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... count .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.count']}" 
								for="count" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="count"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.count}"
							maxlength="30"  />
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="count" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... volumeCode .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.volumeCode']}" 
								for="volumeCode" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="volumeCode"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.volumeCode}"
							maxlength="20"  />
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="volumeCode" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... volumeTitle .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.volumeTitle']}" 
								for="volumeTitle" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="volumeTitle"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.volumeTitle}" 
							maxlength="200" />
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="volumeTitle" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... editionTitle .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.editionTitle']}" 
								for="editionTitle" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="editionTitle"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.editionTitle}"
							maxlength="200"  />
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="editionTitle" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... editionISSN .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.editionISSN']}" 
								for="editionISSN" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="editionISSN"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.editionISSN}"
							maxlength="40"  />
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="editionISSN" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... editionNumber .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.editionNumber']}" 
								for="editionNumber" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="editionNumber"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.editionNumber}" />
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="editionNumber" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... Note .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.note']}" 
								for="note" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputTextarea
							id="note"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.note.content}"
							rows="3" />
						<p:commandButton
							action="#{monographManagedBean.noteTranslations}"
							value="#{messages['records.monograph.editPanel.btnNoteTranslations']}"
							update="multilingualContentEditModalPanel"
							execute="@this"/>
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="note" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... Keywords .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.keywords']}" 
								for="keywords" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputTextarea
							id="keywords"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.keywords.content}"
							rows="3" />
						<p:commandButton
							action="#{monographManagedBean.keywordsTranslations}"
							value="#{messages['records.monograph.editPanel.btnKeywordsTranslations']}"
							update="multilingualContentEditModalPanel"
							execute="@this"/>
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="keywords" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... Abstract .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.abstract']}" 
								for="abstract" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputTextarea
							id="abstract"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.abstracT.content}"
							rows="3" />
						<p:commandButton
							action="#{monographManagedBean.abstractTranslations}"
							value="#{messages['records.monograph.editPanel.btnAbstractTranslations']}"
							render="multilingualContentEditModalPanel" 
							execute="@this"/>
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="abstract" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... DOI ....... -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.doi']}" 
								for="doi" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="doi"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}"
							value="#{monographManagedBean.selectedMonograph.doi}"
							maxlength="200" />
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="doi" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... URI ....... -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.uri']}" 
								for="uri" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputTextarea
							id="uri"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}"
							value="#{monographManagedBean.selectedMonograph.uri}"
							rows="3"/>
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="uri" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
					</h:panelGrid>
				</p:tab>
				<p:tab
					name="tab1"
					rendered="#{(monographManagedBean.editTabNumber == 1) or (monographManagedBean.editMode == modesManagedBean.viewDetails)}"
					header="#{messages['records.monograph.editPanel.secondTab']}">
					<p:panel
						header="#{messages['records.monograph.editPanel.authorTablePanel.header']}">
						<p:inputText id="listOfAuthors" rendered="false" value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="listOfAuthors"
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage"/>
						</p:outputPanel>
						<h:panelGrid id="authors" columns="1">
							<!--  add Author -->
							<p:commandButton
								action="#{monographManagedBean.pickAuthor}"
								render="authorBrowseModalPanel"
								value="#{messages['records.monograph.editPanel.btnAddAuthor']}"
								rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}" 
								execute="@form" />
							<!-- ===========================   tablePanel  ============================= -->
								<p:dataTable
									id="authorTable"
									value="#{monographManagedBean.selectedMonograph.allAuthors}"
									var="authorRow">
									<!--     ........  author name   .......-->
									<p:column>
										<f:facet name="header">
											<h:outputText
												value="#{messages['records.monograph.editPanel.authorTablePanel.name']}" />
										</f:facet>
										<p:selectOneMenu
											value="#{authorRow.name}"
											disabled="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" >
											<f:selectItems value="#{authorRow.allNamesSelectItems}" />
										</p:selectOneMenu>
									</p:column>
									<!--     ........  change position   .......-->
									<p:column
										rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}">
										<f:facet name="header">
											<h:outputText
												value="#{messages['records.monograph.editPanel.authorTablePanel.changePosition']}" />
										</f:facet>
										<p:commandLink
											action="#{monographManagedBean.moveAuthorUp}"
											render="authors"
											execute="@form">
											<h:graphicImage library="img" name="up.gif"  />
											<f:param name="controlNumber"
												value="#{authorRow.controlNumber}" />
										</p:commandLink>
										<p:commandLink
											action="#{monographManagedBean.moveAuthorDown}"
											render="authors"
											execute="@form" >
											<h:graphicImage library="img" name="down.gif"  />
											<f:param name="controlNumber"
												value="#{authorRow.controlNumber}" />
										</p:commandLink>
									</p:column>
									<!--     ........  remove author   .......-->
									<p:column
										rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}">
										<f:facet name="header">
											<h:outputText
												value="#{messages['records.monograph.editPanel.authorTablePanel.remove']}" />
										</f:facet>
										<p:commandLink
											action="#{monographManagedBean.removeAuthor}"
											render="authors"
											execute="@form" >
											<h:graphicImage library="img" name="delete.png" />
											<f:param name="controlNumber"
												value="#{authorRow.controlNumber}" />
										</p:commandLink>
									</p:column>
									<!--     ........  add author other format name    .......-->
									<p:column
										rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}">
										<f:facet name="header">
											<h:outputText
												value="#{messages['records.monograph.editPanel.authorTablePanel.addOtherFormatName']}" />
										</f:facet>
										<p:commandLink
											action="#{monographManagedBean.addAuthorOtherFormatName}"
											render="authorNameFormatsModalPanel" 
											execute="@form" >
											<h:graphicImage library="img" name="edit.png"  />
											<f:param name="controlNumber"
												value="#{authorRow.controlNumber}" />
										</p:commandLink>
									</p:column>
								</p:dataTable>
						</h:panelGrid>
					</p:panel>
					<p:panel
						header="#{messages['records.journal.editPanel.editorTablePanel.header']}">
						<p:inputText id="listOfEditors" rendered="false" value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="listOfEditors"
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage"/>
						</p:outputPanel>
						<h:panelGrid id="editors" columns="1">
							<!--  add Editor -->
							<p:commandButton
								action="#{monographManagedBean.pickEditor}"
								render="authorBrowseModalPanel"
								value="#{messages['records.monograph.editPanel.btnAddEditor']}"
								rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}" 
								execute="@form" />
							<!-- ===========================   tablePanel  ============================= -->
								<p:dataTable
									id="editorTable"
									value="#{monographManagedBean.selectedMonograph.editors}"
									var="editorRow">
									<!--     ........  editor name   .......-->
									<p:column>
										<f:facet name="header">
											<h:outputText
												value="#{messages['records.monograph.editPanel.editorTablePanel.name']}" />
										</f:facet>
										<p:selectOneMenu
											value="#{editorRow.name}"
											disabled="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" >
											<f:selectItems value="#{editorRow.allNamesSelectItems}" />
										</p:selectOneMenu>
									</p:column>
									<!--     ........  change position   .......-->
									<p:column
										rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}">
										<f:facet name="header">
											<h:outputText
												value="#{messages['records.monograph.editPanel.editorTablePanel.changePosition']}" />
										</f:facet>
										<p:commandLink
											action="#{monographManagedBean.moveEditorUp}"
											render="editors"
											execute="@form" >
											<h:graphicImage library="img" name="up.gif"  />
											<f:param name="controlNumber"
												value="#{editorRow.controlNumber}" />
										</p:commandLink>
										<p:commandLink
											action="#{monographManagedBean.moveEditorDown}"
											render="editors"
											execute="@form" >
											<h:graphicImage library="img" name="down.gif"  />
											<f:param name="controlNumber"
												value="#{editorRow.controlNumber}" />
										</p:commandLink>
									</p:column>
									<!--     ........  remove editor   .......-->
									<p:column
										rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}">
										<f:facet name="header">
											<h:outputText
												value="#{messages['records.monograph.editPanel.editorTablePanel.remove']}" />
										</f:facet>
										<p:commandLink
											action="#{monographManagedBean.removeEditor}"
											render="editors"
											execute="@form" >
											<h:graphicImage library="img" name="delete.png" />
											<f:param name="controlNumber"
												value="#{editorRow.controlNumber}" />
										</p:commandLink>
									</p:column>
									<!--     ........  add editor other format name    .......-->
									<p:column
										rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}">
										<f:facet name="header">
											<h:outputText
												value="#{messages['records.monograph.editPanel.editorTablePanel.addOtherFormatName']}" />
										</f:facet>
										<p:commandLink
											action="#{monographManagedBean.addEditorOtherFormatName}"
											render="authorNameFormatsModalPanel" 
											execute="@form" >
											<h:graphicImage library="img" name="edit.png"  />
											<f:param name="controlNumber"
												value="#{editorRow.controlNumber}" />
										</p:commandLink>
									</p:column>
								</p:dataTable>
						</h:panelGrid>
					</p:panel>
				</p:tab>
				<p:tab
					name="tab2"
					rendered="#{(monographManagedBean.editTabNumber == 2) or (monographManagedBean.editMode == modesManagedBean.viewDetails)}"
					header="#{messages['records.monograph.editPanel.thirdTab']}">
					<h:panelGrid columns="5" columnClasses="width20, width30, width10, width10, width30" width="100%">
						<!-- ....... Research Area.......  -->
						<p:outputPanel
							ajaxRendered="true"
							rendered="#{(monographManagedBean.editMode == modesManagedBean.import)}">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.researchArea']}" 
								for="researchArea" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:outputPanel
							ajaxRendered="true"
							rendered="#{(monographManagedBean.editMode == modesManagedBean.import)}" >
							<p:inputTextarea
								id="researchArea"
								readonly="true" 
								value="#{monographManagedBean.selectedMonograph.researchArea.term.content}"
								rows="3"  />
						</p:outputPanel>
						<p:commandButton
							rendered="#{(monographManagedBean.editMode == modesManagedBean.import)}" 
							action="#{monographManagedBean.pickResearchArea}"
							render="researchAreaBrowseModalPanel"
							value="#{messages['records.monograph.editPanel.btnPickResearchArea']}" 
							execute="@this" />
						<h:outputText 
							value=""
							rendered="#{(monographManagedBean.editMode == modesManagedBean.import)}" />
						<p:outputPanel
							ajaxRendered="true" 
							rendered="#{(monographManagedBean.editMode == modesManagedBean.import)}"
							>
							<p:message
								for="researchArea" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... publisherName .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.publisherName']}" 
								for="publisherName" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputTextarea
							id="publisherName"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.publisher.originalPublisher.name}"
							rows="3"  />
						<p:commandButton
							action="#{monographManagedBean.publisherTranslations}"
							value="#{messages['records.monograph.editPanel.btnPublisherTranslations']}"
							render="multilingualContentPublisherEditModalPanel" 
							execute="@this"/>
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="publisherName" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... publisherPlace .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.publisherPlace']}" 
								for="publisherPlace" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="publisherPlace"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.publisher.originalPublisher.place}"
							maxlength="200"  />
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="publisherPlace" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... publisherState .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.publisherState']}" 
								for="publisherState" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="publisherState"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.publisher.originalPublisher.state}"
							maxlength="200"  />
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="publisherState" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... publicationYear .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.monograph.editPanel.publicationYear']}*" 
								for="publicationYear" 
								errorStyleClass="errorMessage"
								/>
						</p:outputPanel>
						<p:inputText
							id="publicationYear"
							readonly="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{monographManagedBean.selectedMonograph.publicationYear}"
							required="true" 
							validatorMessage="#{messages['records.monograph.editPanel.publicationYear.format']}"
							 >
							<f:validateRegex pattern="[1-2][0-9]{3}" />
						</p:inputText>
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="publicationYear" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
					</h:panelGrid>
					<p:panel
							id="languageTablePanel"
							header="#{messages['records.monograph.editPanel.languageTablePanel.header']}"
							rendered="#{(monographManagedBean.editMode == modesManagedBean.import)}"
							>
						<p:inputText id="listOfLanguages" rendered="false" value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="listOfLanguages"
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage"/>
						</p:outputPanel>
						
						<h:panelGrid columns="5" columnClasses="width20, width30, width10, width10, width30" width="100%">
							<!--  ....... Text Language ....... -->
							<p:outputPanel ajaxRendered="true">
								<mytags:outputLabel 
									rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}"
									value="#{messages['records.monograph.editPanel.language']}" 
									for="textLanguage" 
									errorStyleClass="errorMessage"
									/>
							</p:outputPanel>
							<p:selectOneMenu
								id="textLanguage"
								rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}"
								value="#{monographManagedBean.language}" 
								required="false"	>
								<ui:include src="../languagesSelectItems.xhtml" />
							</p:selectOneMenu>
							<p:commandButton
								rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}" 
								action="#{monographManagedBean.addLanguage}"
								value="#{messages['records.monograph.editPanel.btnAddLanguage']}"
								render="monographEditModalPanel" 
								execute="@form" />
							<h:outputText value=""
								rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}" />
							<p:outputPanel
								ajaxRendered="true"
								rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}">
								<p:message
									for="language" 
									errorClass="errorMessage"
									infoClass="infoMessage"
									warnClass="warnMessage"
									fatalClass="fatalMessage" />
							</p:outputPanel>
						</h:panelGrid>
						<h:panelGrid id="languages" columns="1">
							 <!-- ===========================   tablePanel  ============================= --> 
							<p:dataTable
								id="languageTable"
								value="#{monographManagedBean.selectedMonograph.localizedLanguages}"
								var="languageRow">
								   <!--    ........  language   ....... -->
								<p:column>
									<f:facet name="header">
										<h:outputText
											value="#{messages['records.monograph.editPanel.languageTablePanel.language']}" />
									</f:facet>
									<h:outputText value="#{languageRow}" />
								</p:column>
								    <!--  ........  remove language   ....... -->
								<p:column
									rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}">
									<f:facet name="header">
										<h:outputText
											value="#{messages['records.monograph.editPanel.languageTablePanel.remove']}" />
									</f:facet>
									<p:commandLink
										action="#{monographManagedBean.removeLanguage}"
										render="languageTablePanel"
										limitRender="true" 
										execute="@this" >
										<h:graphicImage library="img" name="delete.png" />
										<f:param name="language" value="#{languageRow}" />
									</p:commandLink>
								</p:column>
							</p:dataTable>
						</h:panelGrid>
					</p:panel>
					<p:panel
							id="originalLanguageTablePanel"
							header="#{messages['records.monograph.editPanel.originalLanguageTablePanel.header']}"
							rendered="#{(monographManagedBean.editMode == modesManagedBean.import)}" >
						<p:inputText id="listOfOriginalLanguages" rendered="false" value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="listOfOriginalLanguages"
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage"/>
						</p:outputPanel>
						
						<h:panelGrid columns="5" columnClasses="width20, width30, width10, width10, width30" width="100%">
							<!--   ....... OriginalLanguage ....... -->        
							<p:outputPanel ajaxRendered="true">
								<mytags:outputLabel 
									rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}"
									value="#{messages['records.monograph.editPanel.originalLanguage']}" 
									for="originalLanguage" 
									errorStyleClass="errorMessage"
									/>
							</p:outputPanel>
							<p:selectOneMenu
								id="originalLanguage"
								rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}"
								value="#{monographManagedBean.originalLanguage}" 
								required="false"	>
								<ui:include src="../languagesSelectItems.xhtml"/>
							</p:selectOneMenu>
							<p:commandButton
								rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}" 
								action="#{monographManagedBean.addOriginalLanguage}"
								value="#{messages['records.monograph.editPanel.btnAddOriginalLanguage']}"
								render="monographEditModalPanel" 
								execute="@form" />
							<h:outputText value=""
								rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}" />
							<p:outputPanel
								ajaxRendered="true"
								rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}">
								<p:message
									for="originalLanguage" 
									errorClass="errorMessage"
									infoClass="infoMessage"
									warnClass="warnMessage"
									fatalClass="fatalMessage" />
							</p:outputPanel>
						</h:panelGrid>
						<h:panelGrid id="originalLanguages" columns="1">
							<!--  ===========================   tablePanel  ============================= -->
							<p:dataTable
								id="originalLanguageTable"
								value="#{monographManagedBean.selectedMonograph.localizedOriginalLanguages}"
								var="originalLanguageRow">
								<!--........  originalLanguage   ....... -->
								<p:column>
									<f:facet name="header">
										<h:outputText
											value="#{messages['records.monograph.editPanel.originalLanguageTablePanel.originalLanguage']}" />
									</f:facet>
									<h:outputText value="#{originalLanguageRow}" />
								</p:column>
								<!--   ........  remove original language   ....... -->
								<p:column
									rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails)}">
									<f:facet name="header">
										<h:outputText
											value="#{messages['records.monograph.editPanel.originalLanguageTablePanel.remove']}" />
									</f:facet>
									<p:commandLink
										action="#{monographManagedBean.removeOriginalLanguage}"
										render="originalLanguageTablePanel"
										limitRender="true" 
										execute="@this" >
										<h:graphicImage library="img" name="delete.png" />
										<f:param name="originalLanguage" value="#{originalLanguageRow}" />
									</p:commandLink>
								</p:column>
							</p:dataTable>
						</h:panelGrid>
					</p:panel>
				</p:tab>
				<p:tab
					name="tab3"
					header="#{messages['records.monograph.editPanel.fourthTab']}"
					rendered="#{(monographManagedBean.editTabNumber == 3) and ((monographManagedBean.editMode == modesManagedBean.add) or (monographManagedBean.editMode == modesManagedBean.import))}">
					<p:outputPanel ajaxRendered="true">
						<h:panelGrid columns="2">
							<h:graphicImage library="img" name="info.png" />
							<h:outputText value="#{monographManagedBean.pickSimilarMessage}"
								styleClass="ui-message-info" />
						</h:panelGrid>
					</p:outputPanel>
					<p:spacer
						height="10"
						width="1"
						/>
					<p:dataTable
						id="monographTable" 
						value="#{monographManagedBean.similarMonographs}"
						var="monographRow" >
						<!--     ........  title   .......-->
						<p:column >
							<f:facet name="header">
								<h:outputText
									value="#{messages['records.monograph.tablePanel.title']}" />
							</f:facet>
							<h:outputText value="#{monographRow.someTitle}" />
						</p:column>
						<!--     ........  isbn  .......-->
						<p:column >
							<f:facet name="header">
								<h:outputText
									value="#{messages['records.monograph.tablePanel.isbn']}" />
							</f:facet>
							<h:outputText value="#{monographRow.isbn}" />
						</p:column>
						<!--     ........  chooseSimilar   .......-->
						<p:column
							rendered="#{monographManagedBean.editMode != modesManagedBean.import}">
							<f:facet name="header">
								<h:outputText
									value="#{messages['records.monograph.tablePanel.chooseSimilar']}" />
							</f:facet>
							<p:commandLink
								action="#{monographManagedBean.chooseSimilar}"
								render="mainPanel, #{monographManagedBean.renderModalPanels}"
								limitRender="true"
								immediate="true"
								execute="@this">
								<h:graphicImage library="img" name="pick.png" />
								<f:param name="controlNumber" value="#{monographRow.controlNumber}" />
								<p:tooltip followMouse="true" direction="topRight"
									showDelay="1000" styleClass="tooltip" mode="client">
									<span class="tooltipSpan"> 
										<h:panelGrid columns="2">
											<h:graphicImage library="img" name="pickToolTip.png" />
											<h:outputText
												value="#{messages['records.monograph.tablePanel.btnPick']}" />
										</h:panelGrid> 
									</span>
								</p:tooltip>
							</p:commandLink>
							<p:commandLink
								render="relatedRecordsEditModalPanel"
							    execute="@this" 
							    limitRender="true">
							    <h:graphicImage id="relatedRecords" library="img" name="publications.png" />
							    <f:setPropertyActionListener target="#{relatedRecordsManagedBean.selectedRecord}"
							        value="#{monographRow}" />
								<p:tooltip followMouse="true" direction="topRight"
									showDelay="1000" styleClass="tooltip" mode="client">
									<span class="tooltipSpan"> 
										<h:panelGrid columns="2">
											<h:graphicImage library="img" name="publicationsToolTip.png" />
											<h:outputText
												value="#{messages['records.monograph.tablePanel.btnPublications']}" />
										</h:panelGrid> 
									</span>
								</p:tooltip>
							</p:commandLink>
						</p:column>
						<!--     ........  examineThis   .......-->
						<p:column
							rendered="#{monographManagedBean.editMode == modesManagedBean.import}">
							<f:facet name="header">
								<h:outputText
									value="#{messages['records.monograph.tablePanel.examine']}" />
							</f:facet>
							<p:commandLink
								action="#{monographManagedBean.examineData}"
								render="mainPanel, #{monographManagedBean.renderModalPanels}"
								limitRender="true"
								immediate="true"
								execute="@this">
								<h:graphicImage library="img" name="pick.png" />
								<f:param name="controlNumber" value="#{monographRow.controlNumber}" />
								<p:tooltip followMouse="true" direction="topRight"
									showDelay="1000" styleClass="tooltip" mode="client">
									<span class="tooltipSpan"> 
										<h:panelGrid columns="2">
											<h:graphicImage library="img" name="pickToolTip.png" />
											<h:outputText
												value="#{messages['records.monograph.tablePanel.btnExamine']}" />
										</h:panelGrid> 
									</span>
								</p:tooltip>
							</p:commandLink>
						</p:column>
						<!--     ........  mergeWithThis   .......-->
						<p:column
							rendered="false">
							<f:facet name="header">
								<h:outputText
									value="#{messages['records.monograph.tablePanel.merge']}" />
							</f:facet>
							<p:commandLink
								action="#{monographManagedBean.mergeData}"
								render="mainPanel, #{monographManagedBean.renderModalPanels}"
								limitRender="true"
								immediate="true"
								execute="@this">
								<h:graphicImage library="img" name="pick.png" />
								<f:param name="controlNumber" value="#{monographRow.controlNumber}" />
								<p:tooltip followMouse="true" direction="topRight"
									showDelay="1000" styleClass="tooltip" mode="client">
									<span class="tooltipSpan"> 
										<h:panelGrid columns="2">
											<h:graphicImage library="img" name="pickToolTip.png" />
											<h:outputText
												value="#{messages['records.monograph.tablePanel.btnMerge']}" />
										</h:panelGrid> 
									</span>
								</p:tooltip>
							</p:commandLink>
						</p:column>
					</p:dataTable>
				</p:tab>
				<p:tab
					name="tab4"
					header="#{messages['records.monograph.editPanel.fifthTab']}"
					rendered="#{(monographManagedBean.editMode == modesManagedBean.viewDetails)}">
					<p:outputPanel ajaxRendered="true">
						<p:inputTextarea
							value="#{monographManagedBean.selectedMonograph.record.MARC21Record.printableString}"
							readonly="true" cols="60" styleClass="marc21TextArea" />
					</p:outputPanel>
				</p:tab>
			</p:tabView>
		</p:panel>
		<!--================= Update, Create, Cancel buttons ====================  -->
		<h:panelGrid columns="3">
			<p:commandButton
				rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails) and (monographManagedBean.editTabNumber gt 0) and (monographManagedBean.editTabNumber lt 3)}"
				action="#{monographManagedBean.previousEditTab}"
				value="#{messages['records.monograph.editPanel.btnPrevious']}"
				render="monographEditModalPanel"
				limitRender="true" 
				execute="@form" />
			<p:commandButton
				rendered="#{(monographManagedBean.editMode != modesManagedBean.viewDetails) and (monographManagedBean.editTabNumber lt 2)}"
				action="#{monographManagedBean.nextEditTab}"
				value="#{messages['records.monograph.editPanel.btnNext']}"
				render="monographEditModalPanel"
				limitRender="true" 
				execute="@form" />
			<p:commandButton
				rendered="#{((monographManagedBean.editMode == modesManagedBean.update) or ((monographManagedBean.editMode == modesManagedBean.import) and (not empty monographManagedBean.selectedMonograph.controlNumber))) and ((monographManagedBean.editTabNumber == 2) or (monographManagedBean.editTabNumber == 3))}"
				action="#{monographManagedBean.update}"
				value="#{messages['records.monograph.editPanel.btnUpdate']}"
				render="monographEditModalPanel" 
				limitRender="true" 
				execute="@form" />
			<p:commandButton
				rendered="#{((monographManagedBean.editMode == modesManagedBean.add) or ((monographManagedBean.editMode == modesManagedBean.import) and (empty monographManagedBean.selectedMonograph.controlNumber))) and ((monographManagedBean.editTabNumber == 2) or (monographManagedBean.editTabNumber == 3))}"
				action="#{monographManagedBean.add}"
				value="#{messages['records.monograph.editPanel.btnCreate']}"
				render="monographEditModalPanel" 
				limitRender="true" 
				execute="@form" />
			<p:commandButton
				rendered="#{(monographManagedBean.editMode == modesManagedBean.import) and (monographManagedBean.editTabNumber == 3)}"
				action="#{monographManagedBean.examineData}"
				value="#{messages['records.monograph.editPanel.btnExamine']}"
				render="monographEditModalPanel" 
				limitRender="true" 
				execute="@this" />
			<p:commandButton
				rendered="#{(monographManagedBean.editTabNumber lt 3)}" 
				action="#{monographManagedBean.switchSimple}"
				value="#{messages['records.monograph.editPanel.btnSimpleEdit']}"
				render="monographSimpleEditModalPanel, monographEditModalPanel" 
				execute="@form" />
			<p:commandButton
				rendered="#{(monographManagedBean.editTabNumber == 4)}" 
				action="#{monographManagedBean.finishWizard}"
				value="#{messages['records.monograph.editPanel.btnAllRight']}"
				render="mainPanel, #{monographManagedBean.renderModalPanels}"
				limitRender="true"
				immediate="true" 
				execute="@this" />
		</h:panelGrid>
	</h:panelGrid>


</ui:composition>