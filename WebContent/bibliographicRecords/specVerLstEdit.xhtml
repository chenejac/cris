<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:mytags="http://dragan.tmd.uns.ac.rs/mytags">

	<h:panelGrid id="specVerLstEditFormPanel">
		<p:inputText id="general" rendered="false" value="" />
		<p:outputPanel ajaxRendered="true">
			<p:message
				for="general"
				errorClass="errorMessage"
				infoClass="infoMessage"
				warnClass="warnMessage"
				fatalClass="fatalMessage"/>
		</p:outputPanel>
		<!-- .......specVerLst.......           -->
		<p:panel id="specVerLstPreview"
			header="#{messages['records.specVerLst.editPanel.preview']}"
			rendered="#{specVerLstManagedBean.editTabNumber == 2}">
			<p:outputPanel ajaxRendered="true">
				<h:panelGrid columns="1">
					<h:outputText
						value="#{specVerLstManagedBean.selectedSpecVerLst}"
						styleClass="preview" />
				</h:panelGrid>
			</p:outputPanel>
		</p:panel>
		<p:panel
			id="scrollableBody"
			rendered="#{specVerLstManagedBean.editTabNumber lt 2}"
			styleClass="scrollableBody">
			<p:tabView
				switchType="#{(specVerLstManagedBean.editMode == modesManagedBean.viewDetails)?'client':'ajax'}" 
				activeItem="#{specVerLstManagedBean.activeEditTab}" >
				<p:tab
					name="tab0"
					header="#{messages['records.specVerLst.editPanel.firstTab']}"
					rendered="#{specVerLstManagedBean.editTabNumber == 0}">
					<h:panelGrid columns="5" columnClasses="width20, width30, width10, width10, width30" width="100%">
						<!-- ....... specVerLstUserCode .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.specVerLst.editPanel.specVerLstUserCode']}*" 
								for="specVerLstUserCode" 
								errorStyleClass="errorMessage" />
						</p:outputPanel>
						<p:inputText
							id="specVerLstUserCode"
							readonly="#{(specVerLstManagedBean.editMode != modesManagedBean.add)}" 
							value="#{specVerLstManagedBean.selectedSpecVerLst.specVerLstUserCode}"
							maxlength="50"
							style="width:100% !important;"
							required="true"/>
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="specVerLstUserCode" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!--  ...... language ..... -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.specVerLst.editPanel.nameLanguage']}*" 
								for="language" 
								errorStyleClass="errorMessage" />
						</p:outputPanel>
						<p:selectOneMenu
							id="language"
							disabled="#{(specVerLstManagedBean.editMode == modesManagedBean.viewDetails)}"
							value="#{specVerLstManagedBean.selectedSpecVerLst.name.language}" 
							required="true"	>
							<ui:include src="../languagesSelectItems.xhtml"/>
						</p:selectOneMenu>
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="language" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... Name .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.specVerLst.editPanel.name']}*" 
								for="name" 
								errorStyleClass="errorMessage" />
						</p:outputPanel>
						<p:inputTextarea
							id="name"
							readonly="#{(specVerLstManagedBean.editMode == modesManagedBean.viewDetails)}" 
							value="#{specVerLstManagedBean.selectedSpecVerLst.name.content}"
							rows="3" 
							style="width:100% !important;"
							required="#{empty specVerLstManagedBean.selectedSpecVerLst.nameTranslations}"/>
						<p:commandButton
							action="#{specVerLstManagedBean.nameTranslations}"
							value="#{messages['records.specVerLst.editPanel.btnNameTranslations']}"
							render="multilingualContentEditModalPanel" 
							execute="@this"/>
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="name" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... START DATE .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.specVerLst.editPanel.startDate']}*" 
								for="startDate" 
								errorStyleClass="errorMessage" />
						</p:outputPanel>
						<p:calendar
							id="startDate"
							locale="en/US"
							disabled="#{(specVerLstManagedBean.editMode == modesManagedBean.viewDetails)}"
							value="#{specVerLstManagedBean.startDate}"
							datePattern="d/M/yyyy"
							required="true"
							firstWeekDay="1"
							enableManualInput="true"
							defaultTime="00:00"
						/>
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="startDate" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
						<!-- ....... END DATE .......           -->
						<p:outputPanel ajaxRendered="true">
							<mytags:outputLabel 
								value="#{messages['records.specVerLst.editPanel.endDate']}*" 
								for="endDate" 
								errorStyleClass="errorMessage" />
						</p:outputPanel>
						<p:calendar
							id="endDate"
							locale="en/US"
							disabled="#{(specVerLstManagedBean.editMode == modesManagedBean.viewDetails)}"
							value="#{specVerLstManagedBean.endDate}"
							datePattern="d/M/yyyy"
							required="true"
							firstWeekDay="1"
							enableManualInput="true"
							defaultTime="23:59"
						/>
						<h:outputText value="" />
						<h:outputText value="" />
						<p:outputPanel ajaxRendered="true">
							<p:message
								for="endDate" 
								errorClass="errorMessage"
								infoClass="infoMessage"
								warnClass="warnMessage"
								fatalClass="fatalMessage" />
						</p:outputPanel>
					</h:panelGrid>
					<p:panel
						header="#{messages['records.specVerLst.editPanel.attachedFiles.header']}"
						rendered="#{(specVerLstManagedBean.editMode == modesManagedBean.update) or (specVerLstManagedBean.editMode == modesManagedBean.viewDetails)}"
						styleClass="scrollableBody">
						<h:panelGrid id="attachedFilesPanel" columns="1">
							<h:panelGrid columns="5" columnClasses="width20, width30, width10, width10, width30" width="100%" 
								rendered="#{(specVerLstManagedBean.editMode == modesManagedBean.update)}">
								<!-- ....... File    -->      
								<p:outputPanel ajaxRendered="true" rendered="#{(specVerLstManagedBean.editMode == modesManagedBean.update)}">
									<mytags:outputLabel 
										value="#{messages['records.specVerLst.editPanel.file']}" 
										for="fileUpload" 
										errorStyleClass="errorMessage"
										/>
								</p:outputPanel>
								<p:fileUpload
										id="fileUpload"
										rendered="#{(specVerLstManagedBean.editMode == modesManagedBean.update)}"
										fileUploadListener="#{specVerLstManagedBean.uploadListener}"
						                immediateUpload="false"
						                listHeight="50"
						                listWidth="300"
						                acceptedTypes="pdf, doc, docx, odt" 
						                allowFlash="auto"
						                style="width:100% !important;"
										update="@form"
						                >
						                <h:outputText 
							        		rendered="#{(specVerLstManagedBean.editMode == modesManagedBean.update)}"
											value=""
											style="width:100% !important;"/>
								</p:fileUpload>
						        <h:outputText value="" />
								<h:outputText value="" />     
								<p:outputPanel ajaxRendered="true">
										<p:message
											for="fileUpload"
											errorClass="errorMessage"
											infoClass="infoMessage"
											warnClass="warnMessage"
											fatalClass="fatalMessage" />
								</p:outputPanel>
							</h:panelGrid>
							<!-- ===========================   tablePanel  ============================= -->
							<p:dataTable
								id="specVerLstAttachedFilesTable"
								value="#{specVerLstManagedBean.allAttachedFiles}"
								var="attachedFileRow"
								rows="10"
								paginator="true" paginatorPosition="bottom"
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								currentPageReportTemplate="#{userManagedBean.currentPageReportTemplate}"
								rowsPerPageTemplate="#{userManagedBean.rowsPerPageTemplate}"
							>
								<!--     ........  file name   .......-->
								<p:column>
									<f:facet name="header">
										<h:outputText
											value="#{messages['records.specVerLst.editPanel.specVerLstAttachedFiles.fileName']}" />
									</f:facet>
									<h:outputText 
										value="#{attachedFileRow.fileName}" />
								</p:column>
								<!--     ........  download file .......-->
								<p:column>
									<f:facet name="header">
										<h:outputText
											value="#{messages['records.specVerLst.editPanel.specVerLstAttachedFiles.download']}" />
									</f:facet>
									<h:outputLink 
										value="#{attachedFileRow.fileURL}"
										target="_blank" 
										rendered="#{attachedFileRow.id gt 0}">
										<h:graphicImage library="img" name="download32.png" id="download32" alt="none"/>
									</h:outputLink>
									<h:outputText 
											value=""
											rendered="#{attachedFileRow.id le 0}"
									 /> 
								</p:column>
								<!--     ........  remove file .......-->
								<p:column
									rendered="#{(specVerLstManagedBean.editMode == modesManagedBean.update)}">
									<f:facet name="header">
										<h:outputText
											value="#{messages['records.specVerLst.editPanel.specVerLstAttachedFiles.remove']}" />
									</f:facet>
									<p:commandLink
										rendered="#{(specVerLstManagedBean.editMode == modesManagedBean.update)}"
										action="#{specVerLstManagedBean.deleteFile}"
										render="attachedFilesPanel" 
										limitRender="true"
										execute="@this"
										>
										<h:graphicImage library="img" name="delete.png" />
										<f:param id="fileNameId" name="fileNameId" value="#{attachedFileRow.fileName}"/>
									</p:commandLink>
								</p:column>
							</p:dataTable>
						</h:panelGrid>
					</p:panel>
					<p:panel
						header="#{messages['records.specVerLst.editPanel.specVerLstResultsTypeOfResPubls.header']}"
						rendered="#{(specVerLstManagedBean.editMode == modesManagedBean.update) or (specVerLstManagedBean.editMode == modesManagedBean.viewDetails)}"
						styleClass="scrollableBody">
						<h:panelGrid id="specVerLstResultsTypeOfResPublsPanel" columns="1">	
							<p:inputText id="generalSpecVerLstResultsTypeOfResPubls" rendered="false" value="" />
							<p:outputPanel ajaxRendered="true">
								<p:message
									for="generalSpecVerLstResultsTypeOfResPubls"
									errorClass="errorMessage"
									infoClass="infoMessage"
									warnClass="warnMessage"
									fatalClass="fatalMessage"/>
							</p:outputPanel>
							<h:panelGroup>
								<!--  add Specially Verified List Results Type Of Result Publications list-->
								<p:commandButton
										rendered="#{specVerLstManagedBean.editMode == modesManagedBean.update}"
										action="#{specVerLstManagedBean.switchSpecVerLstResultsTypeOfResPublToAddMode}"
										value="#{messages['records.specVerLst.editPanel.btnAddSpecVerLstResultsTypeOfResPubls']}"
										render="specVerLstResultsTypeOfResPublEditModalPanel specVerLstResultsTypeOfResPublsPanel"
										limitRender="true"
										immediate="true" 
										execute="@form"/>
							</h:panelGroup>
							<!-- ===========================   tablePanel  ============================= -->
							<p:dataTable
								id="specVerLstResultsTypeOfResPublsTable"
								value="#{specVerLstManagedBean.allSpecVerLstResultsTypeOfResPubls}"
								var="specVerLstResultsTypeOfResPublRow"
								rows="10"
								paginator="true" paginatorPosition="bottom"
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								currentPageReportTemplate="#{userManagedBean.currentPageReportTemplate}"
								rowsPerPageTemplate="#{userManagedBean.rowsPerPageTemplate}"
								>
								<!--     ........  year   .......-->
								<p:column>
									<f:facet name="header">
										<h:outputText
											value="#{messages['records.specVerLst.editPanel.specVerLstResultsTypeOfResPubls.year']}" />
									</f:facet>
									<h:outputText 
										value="#{specVerLstResultsTypeOfResPublRow.year}" />
								</p:column>
								<!--     ........  publication Display Name .......-->
								<p:column>
									<f:facet name="header">
										<h:outputText
											value="#{messages['records.specVerLst.editPanel.specVerLstResultsTypeOfResPubls.publDisplName']}" />
									</f:facet>
									<h:outputText 
										value="#{specVerLstResultsTypeOfResPublRow.publDisplName}" />
								</p:column>
								<!--     ........  publication Human Readable ID .......-->
								<p:column>
									<f:facet name="header">
										<h:outputText
											value="#{messages['records.specVerLst.editPanel.specVerLstResultsTypeOfResPubls.publHumanReadId']}" />
									</f:facet>
									<h:outputText 
										value="#{specVerLstResultsTypeOfResPublRow.publHumanReadId}" />
								</p:column>
								<!--     ........  Result Type .......-->
								<p:column>
									<f:facet name="header">
										<h:outputText
											value="#{messages['records.specVerLst.editPanel.specVerLstResultsTypeOfResPubls.resultsType']}" />
									</f:facet>
									<h:outputText 
										value="#{specVerLstResultsTypeOfResPublRow.resultsType}" />
								</p:column>
								
								<!--     ........  Specially Verified List Results Type Of Result Publication   .......-->
								<p:column
									rendered="#{specVerLstManagedBean.editMode == modesManagedBean.update}">
									<f:facet name="header">
										<h:outputText
											value="#{messages['records.specVerLst.editPanel.specVerLstResultsTypeOfResPubls.remove']}" />
									</f:facet>
									<p:commandLink
										action="#{specVerLstManagedBean.deleteSpecVerLstResultsTypeOfResPublToDatabase}"
										render="specVerLstResultsTypeOfResPublsPanel" 
										execute="@this"
										>
										<h:graphicImage library="img" name="delete.png" />
										<f:param id="selectedYear" name="selectedYear" value="#{specVerLstResultsTypeOfResPublRow.year}"/>
										<f:param id="selectedPublHumanReadId" name="selectedPublHumanReadId" value="#{specVerLstResultsTypeOfResPublRow.publHumanReadId}"/>
									</p:commandLink>
								</p:column>
							</p:dataTable>
						</h:panelGrid>
					</p:panel>
				</p:tab>
				<p:tab
					name="tab1"
					header="#{messages['records.specVerLst.editPanel.secondTab']}"
					rendered="#{(specVerLstManagedBean.editTabNumber == 1) and (specVerLstManagedBean.editMode == modesManagedBean.add)}">
					<p:outputPanel ajaxRendered="true">
						<h:panelGrid columns="2">
							<h:graphicImage library="img" name="info.png" />
							<h:outputText value="#{specVerLstManagedBean.pickSimilarMessage}"
								styleClass="ui-message-info" />
						</h:panelGrid>
					</p:outputPanel>
					<p:spacer
						height="10"
						width="1"
						/>
					<p:dataTable
						id="specVerLstTable" 
						value="#{specVerLstManagedBean.similarSpecVerLsts}"
						var="specVerLstRow" >
						<!--     ........  name   .......-->
						<p:column >
							<f:facet name="header">
								<h:outputText
									value="#{messages['records.specVerLst.tablePanel.name']}" />
							</f:facet>
							<h:outputText value="#{specVerLstRow}" />
						</p:column>
						<!--     ........  chooseSimilar   .......-->
						<p:column>
							<f:facet name="header">
								<h:outputText
									value="#{messages['records.specVerLst.tablePanel.chooseSimilar']}" />
							</f:facet>
							<p:commandLink
								action="#{specVerLstManagedBean.chooseSimilar}"
								render="mainPanel, #{specVerLstManagedBean.renderModalPanels}"
								limitRender="true"
								immediate="true"
								execute="@this">
								<h:graphicImage library="img" name="pick.png" />
								<f:param name="controlNumber" value="#{specVerLstRow.controlNumber}" />
								<p:tooltip followMouse="true" direction="topRight"
									showDelay="1000" styleClass="tooltip" mode="client" >
									<span class="tooltipSpan"> 
										<h:panelGrid columns="2">
											<h:graphicImage library="img" name="pickToolTip.png" />
											<h:outputText
												value="#{messages['records.specVerLst.tablePanel.btnPick']}" />
										</h:panelGrid> 
									</span>
								</p:tooltip>
							</p:commandLink>
						</p:column>
					</p:dataTable>
				</p:tab>
				<p:tab
					name="tab2"
					header="#{messages['records.specVerLst.editPanel.thirdTab']}"
					rendered="#{(specVerLstManagedBean.editMode == modesManagedBean.viewDetails)}">
					<p:outputPanel ajaxRendered="true">
						<p:inputTextarea
							value="#{specVerLstManagedBean.selectedSpecVerLst.record.MARC21Record.printableString}"
							readonly="true" cols="60" styleClass="marc21TextArea" />
					</p:outputPanel>
				</p:tab>
			</p:tabView>
		</p:panel>
		<!--================= Update, Create, Cancel buttons ====================  -->
		<h:panelGrid>
			<p:commandButton
				rendered="#{(specVerLstManagedBean.editMode == modesManagedBean.update) and  ((specVerLstManagedBean.editTabNumber == 0) or (specVerLstManagedBean.editTabNumber == 1))}"
				action="#{specVerLstManagedBean.update}"
				value="#{messages['records.specVerLst.editPanel.btnUpdate']}"
				render="specVerLstEditModalPanel" 
				limitRender="true" 
				execute="@form" />
			<p:commandButton
				rendered="#{(specVerLstManagedBean.editMode == modesManagedBean.add) and ((specVerLstManagedBean.editTabNumber == 0) or (specVerLstManagedBean.editTabNumber == 1))}"
				action="#{specVerLstManagedBean.add}"
				value="#{messages['records.specVerLst.editPanel.btnCreate']}"
				render="specVerLstEditModalPanel" 
				limitRender="true" 
				execute="@form" />
			<p:commandButton
				rendered="#{(specVerLstManagedBean.editTabNumber == 2)}" 
				action="#{specVerLstManagedBean.finishWizard}"
				value="#{messages['records.specVerLst.editPanel.btnAllRight']}"
				render="mainPanel, #{specVerLstManagedBean.renderModalPanels}"
				limitRender="true"
				immediate="true" 
				execute="@this"/>
		</h:panelGrid>
	</h:panelGrid>
</ui:composition>