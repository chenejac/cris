<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:mytags="http://dragan.tmd.uns.ac.rs/mytags"
	>
	<f:view locale="#{userManagedBean.language}" 
		contentType="text/html; charset=iso-8859-1" 
		beforePhase="#{prepareUNSPromotionManagedBean.enterPage}">
	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Refresh" content="#{session.maxInactiveInterval};url=prepareUNSPromotion.jsf" />
		<meta http-equiv="Pragma" content="no-cache"/>
		<meta http-equiv="Expires" content="-1"/>
		<title><ui:insert name="title">CRIS UNS</ui:insert></title>
	</h:head>
	<h:body onload="formId='preparePromotionForm'; setFocus(); " 
		rendered="#{(userManagedBean.loggedIn) and ((userManagedBean.privileges[privilegesManagedBean.formPromotion][privilegesManagedBean.browse]))}"
		>
		<h:outputStylesheet library="stylesheet" name="theme.css" target="head"/>
		<h:outputScript library="js" name="functions.js" target="head"/>
		<f:loadBundle
				basename="rs.ac.uns.ftn.informatika.bibliography.utils.ResourceBoundles"
				var="messages" />
		<div id="header">
   			<ui:insert name="header">
   				<ui:include src="./header.xhtml"/>
   			</ui:insert>
		</div>		
		<div id="center">
				<p:spacer
					height="20"
					width="1"
					/>
				<div id="pleaseWait" class="transparent"></div>
				<div id="progressBar" class="progressbar"><h:graphicImage
					library="img" name="progressbar.gif"></h:graphicImage></div>
				<p:ajaxStatus for="form_region" onstart="onStart()" oncomplete="onStop()"/>
				<p:fragment id="form_region">
				<!-- MAIN PANEL -->
					<h:panelGrid 
						id="mainPanel">						
						<p:panel
							id="preparePromotionPanel"
							header="#{messages['records.prepareUNSPromotion.preparePromotionUNS']}">
							<h:form id="preparePromotionForm">							
							<h:panelGrid id="preparePromotionFormPanel" width="100%">	
							<p:inputText id="general" rendered="false" value="" />
									<p:outputPanel ajaxRendered="true">
										<p:message
											for="general"
											errorClass="errorMessage"
											infoClass="infoMessage"
											warnClass="warnMessage"
											fatalClass="fatalMessage"/>
									</p:outputPanel>
								<p:tabView
										dynamic="true">
								<p:ajax
										limitRender="true"
										render="mainPanel, regEntriesForPromotionTable, promotionNames"
										event="tabChange"
										listener="#{prepareUNSPromotionManagedBean.changeTab}"/>
									<p:tab
										title="#{messages['records.prepareUNSPromotion.candidates']}"
										id="registeredEntriesWithoutIdTab" >
										<h:panelGrid>
										<p:dataTable
											id="regEntriesWithoutIdTable" 
											value="#{prepareUNSPromotionManagedBean.registerEntriesWithoutId}"
											var="regEntryRow"
											rowKeyVar="regEntryRowKey" 
											rows="15"
											styleClass="stable" tableStyle="width:auto"
											paginator="true" paginatorPosition="bottom"
											paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
											currentPageReportTemplate="#{userManagedBean.currentPageReportTemplate}"
											rowsPerPageTemplate="#{userManagedBean.rowsPerPageTemplate}"
											>											
											<p:column
												styleClass="ui-datatable-wide-cell" >
												<f:facet name="header">
												 	<p:commandLink value="#{messages['records.prepareUNSPromotion.lastAndFirstName']}" render="regEntriesWithoutIdTable" action="#{prepareUNSPromotionManagedBean.sortByLastName}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.authorName.lastname} #{regEntryRow.authorName.firstname}"/>
											</p:column>
											<p:column
												styleClass="ui-datatable-wide-cell" >
												<f:facet name="header">
													<p:commandLink value="#{messages['records.prepareUNSPromotion.faculty']}" render="regEntriesWithoutIdTable" action="#{prepareUNSPromotionManagedBean.sortBy('institution')}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.institution}"/>
											</p:column>
											<p:column
												styleClass="ui-datatable-wide-cell" >
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.nameOfDegree']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.nameOfAuthorDegree}"/>												
											</p:column>
											<p:column
												styleClass="ui-datatable-wide-cell" >
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.defendedOn']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.defendedOn.time}">
													<f:convertDateTime type="date" pattern="dd.MM.yyyy." timeZone="CET"/>	
												</h:outputText>
											</p:column>
											<p:column
												style="text-align:center;" 
												>						
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.forPromotion']}" />
												</f:facet>
												 <p:inputText  value="#{regEntryRow.futurePromotionName}"
												 rendered="#{(userManagedBean.loggedIn) and ((userManagedBean.privileges[privilegesManagedBean.formPromotion][privilegesManagedBean.update]))}" />	
												 <h:outputText  value="#{regEntryRow.futurePromotionName}" 
												 	rendered="#{(not userManagedBean.loggedIn) or ((not userManagedBean.privileges[privilegesManagedBean.formPromotion][privilegesManagedBean.update]))}" />											 				                    
							                 </p:column>
										</p:dataTable>
									</h:panelGrid>
									</p:tab>
									<p:tab title="#{messages['records.prepareUNSPromotion.prepareForPromotion']}" id="registeredEntriesForPromotionTab"
										rendered="#{(userManagedBean.loggedIn) and ((userManagedBean.privileges[privilegesManagedBean.formPromotion][privilegesManagedBean.update]))}">									
									<h:panelGrid>
										<h:panelGrid columns="2">
											<h:outputText value="#{messages['records.prepareUNSPromotion.promotion']}" />
											<p:selectOneMenu id="promotionNames" value="#{prepareUNSPromotionManagedBean.selectedPromotionName}">
												<f:selectItems value="#{prepareUNSPromotionManagedBean.distinctPromotionNames}"/> 
												<p:ajax event="valueChange" immediate="true" execute="@this" render="regEntriesForPromotionTable" />
											</p:selectOneMenu>
										</h:panelGrid>
										<p:dataTable
											id="regEntriesForPromotionTable" 
											value="#{prepareUNSPromotionManagedBean.selectedForNamedPromotion}"
											var="regEntryRow"
											rowKeyVar="regEntryRowKey" 
											styleClass="stable" tableStyle="width:auto"
											paginator="true" paginatorPosition="bottom"
											paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
											currentPageReportTemplate="#{userManagedBean.currentPageReportTemplate}"
											rowsPerPageTemplate="#{userManagedBean.rowsPerPageTemplate}"
											>
											<!--  
											<p:column
												styleClass="rbr-column" >															
												<f:facet name="header">
													<h:outputText value="R.br." />
												</f:facet>
												<h:outputText value="#{regEntryRowKey+1}."/>
											</p:column>	-->
											<p:column
												styleClass="ui-datatable-wide-cell" >
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.lastAndFirstName']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.authorName.lastname} #{regEntryRow.authorName.firstname}"/>
											</p:column>
											<p:column
												styleClass="ui-datatable-wide-cell">
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.faculty']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.institution}" />
											</p:column>
											<p:column
												styleClass="ui-datatable-wide-cell" >
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.nameOfDegree']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.nameOfAuthorDegree}" />												
											</p:column>
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.defendedOn']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.defendedOn.time}" >
													<f:convertDateTime type="date" pattern="dd.MM.yyyy." timeZone="CET"/>	
												</h:outputText>
											</p:column>
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.diplomaNumber']}" />
												</f:facet>
												<p:inputText value="#{regEntryRow.diplomaNumber}" readonly="#{!regEntryRow.oldProgram}"/>
											</p:column>
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.diplomaPublicationDate']}" />
												</f:facet>
												<p:calendar
									        	   value="#{regEntryRow.diplomaPublicationDateDate}"
									        	   enableManualInput="true"
									        	   required="false"
												   datePattern="dd/MM/yyyy"
												   firstWeekDay="1"	
												   readonly="#{!regEntryRow.oldProgram}"/>													
											</p:column>
											<p:column
												styleClass="ui-datatable-wide-cell" >
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.forPromotion']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.futurePromotionName}" />													
											</p:column>
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.notPromoted']}" />
												</f:facet>									
												<p:commandLink
													action="#{prepareUNSPromotionManagedBean.unselectForPromotion(regEntryRow)}"
													render="preparePromotionPanel" 
													limitRender="true"
													execute="@this" 
													immediate="true">
													<h:graphicImage library="img" name="delete16.png"/>													
												</p:commandLink>
											</p:column>
										</p:dataTable>
										<h:panelGrid columns="4">
										<p:commandButton
											id="showList" 
											value="#{messages['records.prepareUNSPromotion.printList']}" 
											action="#{prepareUNSPromotionManagedBean.prepareListForPrinting()}" 
											render="showListForPrinting"/>	
										<p:commandButton
											id="saveListForPromotion" 
											value="#{messages['records.prepareUNSPromotion.saveList']}" 
											action="#{prepareUNSPromotionManagedBean.saveListForPromotion()}" 
											render="general"	/>													
										<p:commandButton
											id="registerEntryInput"											
											value="#{messages['records.prepareUNSPromotion.registerEntryInput']}" 
											action="#{prepareUNSPromotionManagedBean.registerEntryInput()}" 
											render="registerEntryInputGrid"
											style="margin-left: 80px"/>	
										<p:commandLink ajax="false"
											value="#{messages['records.prepareUNSPromotion.checkRegisterEntryData']}"
											action="#{prepareUNSPromotionManagedBean.checkMaticnaKnjigaForPromotion()}"							
											target="_blank">
										</p:commandLink>
										</h:panelGrid>																			
									</h:panelGrid>
									</p:tab>
									<p:tab title="#{messages['records.prepareUNSPromotion.numPhDPerInstitution']}" id="numPhDPerInstitution"
									rendered="#{(userManagedBean.loggedIn) and ((userManagedBean.privileges[privilegesManagedBean.formPromotion][privilegesManagedBean.update]))}">									
										<h:form id="reportPerInstitutionForm">								
										<h:panelGrid columns="1">											
											<h:outputText value="#{messages['records.prepareUNSPromotion.titleReport']}" />	
											<h:panelGrid columns="5"> 
												<h:outputText value="#{messages['records.prepareUNSPromotion.dateFrom']}" />	
												<p:calendar
									        	   id="dateFromInput"
									        	   value="#{prepareUNSPromotionManagedBean.dateFrom}"
									        	   enableManualInput="true"
												   datePattern="dd/MM/yyyy"
												   firstWeekDay="1"					        	   
									        	   />
												<h:outputText value="#{messages['records.prepareUNSPromotion.dateTo']}" />	
												<p:calendar
									        	   id="dateToInput"
									        	   value="#{prepareUNSPromotionManagedBean.dateTo}"
									        	   enableManualInput="true"
												   datePattern="dd/MM/yyyy"
												   firstWeekDay="1"					        	   
									        	   />
									        	   <p:commandButton
													id="showReport"											
													value="#{messages['records.prepareUNSPromotion.showReport']}" 
													action="#{prepareUNSPromotionManagedBean.executeNumberPhDPerIntitutionForPeriod()}" 
													render="numPhDPerInstitution, mainPanel"									
													execute="@form"
													style="margin-left: 80px"/>			
											</h:panelGrid>
											<p:dataTable
												id="reportPerInstitutionTable" 
												value="#{prepareUNSPromotionManagedBean.listNumberPhDPerInstitution}"
												var="organisationRow"
												rowKeyVar="organisationRowKey" 
												rows="17"
												styleClass="stable" tableStyle="width:auto"
											>	
											<p:column
													styleClass="rbr-column" >															
													<f:facet name="header">
														<h:outputText value="R.br." />
													</f:facet>
													<h:outputText value="#{organisationRowKey+1}."/>													
												</p:column>
												<p:column
													styleClass="ui-datatable-wide-cell" >
													<f:facet name="header">
													 	<h:outputText value="Организациона јединица Универзитета у Новом Саду"/>													
													</f:facet>
													<h:outputText value="#{organisationRow.institutionName}"/>
													<f:facet name="footer">
														<h:outputText value="Ukupno" />
													</f:facet>
												</p:column>
												<p:column
													styleClass="ui-datatable-wide-cell" >
													<f:facet name="header">
													 	<h:outputText value="Број промовисаних-докторске студије"/>													
													</f:facet>
													<h:outputText value="#{organisationRow.numPhDNew}"/>
													<f:facet name="footer">
														<h:outputText value="#{prepareUNSPromotionManagedBean.totalNewProgram}" />
													</f:facet>
												</p:column>
												<p:column
													styleClass="ui-datatable-wide-cell" >
													<f:facet name="header">
													 	<h:outputText value="Број промовисаних-по старом"/>													
													</f:facet>
													<h:outputText value="#{organisationRow.numPhDOld}"/>
													<f:facet name="footer">
														<h:outputText value="#{prepareUNSPromotionManagedBean.totalOldProgram}" />
													</f:facet>
												</p:column>
											</p:dataTable>
											<h:outputText value="Ukupno promovisano: #{prepareUNSPromotionManagedBean.totalOldProgram+prepareUNSPromotionManagedBean.totalNewProgram} "/>
										</h:panelGrid>										
									</h:form>
									<br/>
									<br/>
									<br/>
									<br/>
									<br/>								
									</p:tab>
									<p:tab title="#{messages['records.prepareUNSPromotion.registerEntriesBook']}" id="registerGeneration">
										<h:form id="generateRegister" >
										<h:panelGrid columns="1">		
											<h:panelGrid columns="1">
												<!--<p:selectOneRadio value="#{prepareUNSPromotionManagedBean.registerType}" id="radioRegisterType" immediate="true">
												   	<f:selectItem itemValue="poDatumu" itemLabel="Po datumu" />
												   	<f:selectItem itemValue="poInstituciji" itemLabel="Po instituciji" />	
												   	<p:ajax event="valueChange" immediate="true" execute="@this" render="registerTypePanel"/>
												</p:selectOneRadio>
												-->
												<p:panel id="registerTypePanel">
												<h:panelGrid columns="5" id="poDatumuRegister" 
												>
												  <h:outputText value="#{messages['records.prepareUNSPromotion.dateFrom']}" />	
												<p:calendar
									        	   id="dateFromInputRegister"
									        	   value="#{prepareUNSPromotionManagedBean.dateFromRegister}"
									        	   enableManualInput="true"
												   datePattern="dd/MM/yyyy"
												   firstWeekDay="1"					        	   
									        	   />
												<h:outputText value="#{messages['records.prepareUNSPromotion.dateTo']}" />	
												<p:calendar
									        	   id="dateToInputRegister"
									        	   value="#{prepareUNSPromotionManagedBean.dateToRegister}"
									        	   enableManualInput="true"
												   datePattern="dd/MM/yyyy"
												   firstWeekDay="1"					        	   
									        	   />	
												</h:panelGrid>
												<h:panelGrid columns="3" id="poInstitucijiRegister" >
													 <h:outputText value="Institucija" />
													 <p:selectOneMenu value="#{prepareUNSPromotionManagedBean.institutionRegister}">
													 	<f:selectItems value="#{prepareUNSPromotionManagedBean.getDistinctInstitutionsItems()}" />   
													 </p:selectOneMenu>
													 <p:commandButton ajax="false"
														id="showReport2"											
														value="#{messages['records.prepareUNSPromotion.showReport']}" 
														action="#{prepareUNSPromotionManagedBean.executeShowRegisterEntry()}"																						
														execute="@form"														
														style="margin-left: 80px"
														 onclick="this.form.target='_blank'" 
														/>	
												</h:panelGrid>
												</p:panel>
											</h:panelGrid>	
											</h:panelGrid>							
										</h:form>
										<br/>
										<br/>
										<br/>
										<br/>
										<br/>
										<br/>
										<br/>
									</p:tab>
									<p:tab title="#{messages['records.prepareUNSPromotion.generationIds']}" id="registeredEntriesForGenerationIdsTab"
										rendered="#{(userManagedBean.loggedIn) and ((userManagedBean.privileges[privilegesManagedBean.formPromotion][privilegesManagedBean.update]))}">									
									<h:panelGrid>
										<p:dataTable
											id="regEntriesForGenerationIdsTable" 
											value="#{prepareUNSPromotionManagedBean.listForGeneratingIds}"
											var="regEntryRow"
											rowKeyVar="regEntryRowKey" 
											rows="15"
											styleClass="stable" tableStyle="width:auto"
											paginator="true" paginatorPosition="bottom"
											paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
											currentPageReportTemplate="#{userManagedBean.currentPageReportTemplate}"
											rowsPerPageTemplate="#{userManagedBean.rowsPerPageTemplate}"
											>
											<!--  
											<p:column
												styleClass="rbr-column" >															
												<f:facet name="header">
													<h:outputText value="R.br." />
												</f:facet>
												<h:outputText value="#{regEntryRowKey+1}."/>
											</p:column>	-->
											<p:column			>
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.id']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.id}"/>
											</p:column>
											<p:column
												>															
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.academicYear']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.academicYear}"/>
											</p:column>
											<p:column
												>															
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.academicYearNumber']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.academicYearNumber}"/>
											</p:column>
											<p:column
												styleClass="ui-datatable-wide-cell" >
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.lastAndFirstName']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.authorName.lastname} #{regEntryRow.authorName.firstname}"/>
											</p:column>
											<p:column
												styleClass="ui-datatable-wide-cell">
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.faculty']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.institution}" />
											</p:column>
											<p:column
												styleClass="ui-datatable-wide-cell" >
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.nameOfDegree']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.nameOfAuthorDegree}" />												
											</p:column>
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.defendedOn']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.defendedOn.time}" >
													<f:convertDateTime type="date" pattern="dd.MM.yyyy." timeZone="CET"/>	
												</h:outputText>
											</p:column>
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.diplomaNumber']}" />
												</f:facet>
												<h:outputText value="#{regEntryRow.diplomaNumber}"/>													
											</p:column>
											<p:column>
												<f:facet name="header">
													<h:outputText value="#{messages['records.prepareUNSPromotion.promotionDate']}" />
												</f:facet>
												<p:calendar
									        	   value="#{regEntryRow.promotionDate.time}"
									        	   enableManualInput="true"
									        	   required="false"
												   datePattern="dd/MM/yyyy"
												   firstWeekDay="1"	
												   readonly="true"/>													
											</p:column>
										</p:dataTable>
										<h:panelGrid columns="1">
											<h:panelGrid columns="3">
												<p:commandButton
													value="#{messages['records.prepareUNSPromotion.generateIds']}" 
													action="#{prepareUNSPromotionManagedBean.generateIds()}" 
													render="preparePromotionPanel"/>	
												<p:commandButton
													value="#{messages['records.prepareUNSPromotion.saveGeneratedIds']}" 
													action="#{prepareUNSPromotionManagedBean.storeGeneratedIds()}" 
													render="preparePromotionPanel"	/>
												<p:commandButton
													value="#{messages['records.prepareUNSPromotion.cancel']}" 
													action="#{prepareUNSPromotionManagedBean.executeObtainRegisterEntriesForGeneratingId()}" 
													render="preparePromotionPanel"	/>																	
											</h:panelGrid>																												
										</h:panelGrid>
									</h:panelGrid>																	
									</p:tab>
								</p:tabView>
							</h:panelGrid>
							</h:form>
						</p:panel>
					</h:panelGrid>	
					<h:panelGrid id="showListForPrinting">
					<h:form id="showListForPrintingForm">
					<p:dialog modal="true"
						rendered="#{prepareUNSPromotionManagedBean.showListForPrinting}" 
						show="true"						
						resizeable="true"
						domElementAttachment="parent"
						onbeforeshow="calculateSize('showListForPrintingForm:scrollableBody');"
						minWidth="600"
						minHeight="500">
			       		 <f:facet name="header">
				            <h:outputText value="#{messages['records.prepareUNSPromotion.listForPromotion']}" />
				        </f:facet>
				        <f:facet name="controls">
							<p:commandLink
								action="#{prepareUNSPromotionManagedBean.exitShowList}"
								styleClass="hidelink" 
								render="showListForPrinting"
								limitRender="true"
								immediate="true" 
								execute="@this">
								<h:graphicImage library="img" name="close.png" />
							</p:commandLink>
						</f:facet>
						<h:form>			
						<h:panelGrid width="100%">						
							<p:selectOneMenu id="viewType" value="#{prepareUNSPromotionManagedBean.choosenView}">
							 <f:selectItem itemValue="1"  itemLabel="#{messages['records.prepareUNSPromotion.list']}"/>
							 <f:selectItem itemValue="2"  itemLabel="#{messages['records.prepareUNSPromotion.addresses']}"/> 
							 <f:selectItem itemValue="3"  itemLabel="#{messages['records.prepareUNSPromotion.forDiploma']}"/> 
							 <p:ajax event="valueChange" immediate="true" execute="@this" render="panelForPrinting"/>
							</p:selectOneMenu>
							<p:panel id="panelForPrinting">
					        	<h:outputText value="#{prepareUNSPromotionManagedBean.listForPrinting}" escape="false" rendered="#{prepareUNSPromotionManagedBean.choosenView=='1'}" />
					        	<h:outputText value="#{prepareUNSPromotionManagedBean.listForPrintingAdress}"  escape="false" rendered="#{prepareUNSPromotionManagedBean.choosenView=='2'}" />
					        	<h:outputText value="#{prepareUNSPromotionManagedBean.listForPrintingForDiploma}"  escape="false" rendered="#{prepareUNSPromotionManagedBean.choosenView=='3'}" />
					        </p:panel>
				        </h:panelGrid>	
				        </h:form>					        
				     </p:dialog>
				     </h:form>				     
				    </h:panelGrid>	
				    <h:panelGrid id="registerEntryInputGrid">	
				   	<h:form>			
					<p:dialog modal="true"
						rendered="#{prepareUNSPromotionManagedBean.showRegisterEntryInput}" 
						show="true"						
						resizeable="true"
						domElementAttachment="parent"
						onbeforeshow="calculateSize('showListForPrintingForm:scrollableBody');"
						minWidth="600"
						minHeight="500">
						
			       		 <f:facet name="header">
				            <h:outputText value="#{messages['records.prepareUNSPromotion.registerEntryInput']}" />
				        </f:facet>
				       
				        <f:facet name="controls">
							<p:commandLink
								action="#{prepareUNSPromotionManagedBean.exitShowRegisterEntryInput()}"
								styleClass="hidelink" 
								render="registerEntryInputGrid"
								limitRender="true"
								immediate="true" 
								execute="@this">
								<h:graphicImage library="img" name="close.png" />
							</p:commandLink>
						</f:facet>
						
						<h:form id="savePromotionDateForm">			
						<h:panelGrid width="100%">																
							<h:outputText value="#{messages['records.prepareUNSPromotion.listOfPromotedForRegisterEntryInput']}" />						
							<p:panel id="showPromotedListPanel">
					        	<h:outputText value="#{prepareUNSPromotionManagedBean.listForPromotion}" escape="false" />					        	
					        </p:panel>
					        <h:panelGrid columns="2">
					        	<h:outputFormat value="#{messages['records.prepareUNSPromotion.promotionDate']}" />
					        	<p:calendar
					        	   id="promotionDateInput"
					        	   value="#{prepareUNSPromotionManagedBean.promotionDate}"
					        	   enableManualInput="true"
								   datePattern="dd/MM/yyyy"
								   firstWeekDay="1"					        	   
					        	   />
					        	<p:outputPanel ajaxRendered="true" >
									<p:message
										for="promotionDateInput"
										errorClass="errorMessage"
										infoClass="infoMessage"
										warnClass="warnMessage"
										fatalClass="fatalMessage"/>	
								</p:outputPanel>
					        </h:panelGrid>						         			        	        			        
					        <p:commandButton
									id="executeRegisterEntryInput"											
									value="#{messages['records.prepareUNSPromotion.enter']}" 
									action="#{prepareUNSPromotionManagedBean.executeRegisterEntryInput()}" 
									render="registerEntryInputGrid, mainPanel"									
									execute="@form"
									style="margin-left: 80px"
									/>		
																				
						</h:panelGrid>				       
				        </h:form>			
				        	        
				     </p:dialog>
				     </h:form>			     
				    </h:panelGrid>				
				</p:fragment>
				
				</div>	
	</h:body>	
	</f:view>	
	
</html>	
	