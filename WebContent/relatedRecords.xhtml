<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:mytags="http://dragan.tmd.uns.ac.rs/mytags">

	<p:panel id="recordPreview"
			header="#{messages['records.relatedRecords.preview']}">
			<p:outputPanel ajaxRendered="true">
				<h:panelGrid columns="1">
					<h:outputText
						value="#{relatedRecordsManagedBean.selectedRecord.HTMLRepresentation}"
						styleClass="preview" 
						escape="false"/>
				</h:panelGrid>
			</p:outputPanel>
			<p:panel
				id="scrollableBody"
				styleClass="scrollableBody"
				>
				<h:panelGrid 
					rendered="#{not empty relatedRecordsManagedBean.selectedRecord.relatedRecords}"
					>
					<p:dataTable
						id="recordTable"
						value="#{relatedRecordsManagedBean.selectedRecord.relatedRecords}"
						var="relatedRecordsRow" 
						rows="10"
						styleClass="stable"
						tableStyle="width:auto"
						paginator="true" paginatorPosition="bottom"
						paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						currentPageReportTemplate="#{userManagedBean.currentPageReportTemplate}"
						rowsPerPageTemplate="#{userManagedBean.rowsPerPageTemplate}"
						>
						<p:column>
							<f:facet name="header">
								<h:outputText
									value="#{messages['records.relatedRecords.records']}" />
							</f:facet>
							<h:outputText value="#{relatedRecordsRow.stringRepresentation}" />
						</p:column>
					</p:dataTable>
				</h:panelGrid>
				<h:panelGrid 
					rendered="#{empty relatedRecordsManagedBean.selectedRecord.relatedRecords}">
					<h:outputText
						value="#{messages['records.relatedRecords.norecords']}"
						styleClass="ui-message-info" />
				</h:panelGrid>
			</p:panel>
		</p:panel>
</ui:composition>