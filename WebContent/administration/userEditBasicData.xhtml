
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:p="http://primefaces.org/ui"
     xmlns:mytags="http://dragan.tmd.uns.ac.rs/mytags">


	<h:panelGrid id="userEditBasicDataFormPanel">
		<p:inputText id="general" rendered="false" value="" />
		<p:outputPanel ajaxRendered="true">
			<p:message
				for="general"
				errorClass="errorMessage"
				infoClass="infoMessage"
				warnClass="warnMessage"
				fatalClass="fatalMessage"
				escape="false" />
		</p:outputPanel>
		<!-- .......User.......           -->
		<p:panel id="userPreview"
			header="#{messages['administration.user.editPanel.preview']}">
			<p:outputPanel ajaxRendered="true">
				<h:panelGrid columns="1">
					<h:outputText 
						value="#{userManagedBean.selectedUser}"
						styleClass="preview" />
				</h:panelGrid>
			</p:outputPanel>
		</p:panel>
		<h:panelGrid rendered="#{userManagedBean.editTabNumber == 0}">
			<h:panelGrid columns="1"  width="100%"
				rendered="#{(userManagedBean.editMode != modesManagedBean.register) and (userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData) and (userManagedBean.editMode != modesManagedBean.viewDetails) and (userManagedBean.editMode != modesManagedBean.addFormatName)}">
				<!--  pick Author -->
				<p:commandButton
					action="#{userManagedBean.pickAuthor}"
					render="#{authorManagedBean.renderModalPanels}"
					value="#{messages['administration.user.editPanel.btnPickAuthor']}" 
					execute="@this"/>
			</h:panelGrid>
		</h:panelGrid>
		<h:panelGrid rendered="#{userManagedBean.editTabNumber == 0}">
			<h:panelGrid columns="3" columnClasses="width15, width60, width25" width="100%"
				rendered="#{(not empty userManagedBean.selectedUser.author.controlNumber)}">
				<!-- ....... Middle name.......           -->
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.middleName']}*" 
						for="middleName" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputText
					id="middleName"
					value="#{userManagedBean.selectedUser.author.name.otherName}"
					maxlength="200" 
					required="true"
			 	/>
				<p:outputPanel ajaxRendered="true">
					<p:message
						for="middleName" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... Sex .......           -->
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.sex']}*" 
						for="sex" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:selectOneRadio
					 id="sex"
					 value="#{userManagedBean.selectedUser.author.sex}"
					 required="true"
					 >
					 <f:selectItem itemLabel="#{messages['administration.user.editPanel.sex.male']}" itemValue="m"/>
					 <f:selectItem itemLabel="#{messages['administration.user.editPanel.sex.female']}" itemValue="f"/>
				</p:selectOneRadio>
				<p:outputPanel ajaxRendered="true">
					<p:message
						for="sex" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... Date of birth.......           -->
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.dateOfBirth)}">
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.dateOfBirth']}*" 
						for="dateOfBirth" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:calendar
					id="dateOfBirth"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.dateOfBirth)}"
					value="#{userManagedBean.dateOfBirth}"
					enableManualInput="true"
					datePattern="dd/MM/yyyy"
					firstWeekDay="1"
					required="true"
					dayDisableFunction="disablementFutureDate"
					dayClassFunction="disablementFutureStyleClass"
					showFooter="false"
					showWeekDaysBar="false"
					showWeeksBar="false" 
					inputStyle="width:120px" />
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.dateOfBirth)}">
					<p:message
						for="dateOfBirth" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... Place of birth.......           -->
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.placeOfBirth']}*" 
						for="placeOfBirth" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputText
					id="placeOfBirth"
					value="#{userManagedBean.selectedUser.author.placeOfBirth}"
					maxlength="200" 
					required="true"
					/>
				<p:outputPanel ajaxRendered="true">
					<p:message
						for="placeOfBirth" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... State .......           -->
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.state']}*" 
						for="state" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputText
					id="state"
					value="#{userManagedBean.selectedUser.author.state}"
					maxlength="200" 
					required="true"
				/>
				<p:outputPanel ajaxRendered="true">
					<p:message
						for="state" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... jmbg .......           -->
				<p:outputPanel
					ajaxRendered="true" 
					rendered="#{(userManagedBean.loggedIn) and (not empty userManagedBean.selectedUser.author.institution.controlNumber)}" >
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.jmbg']}" 
						for="jmbg" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputText
					id="jmbg"
					rendered="#{(userManagedBean.loggedIn) and (not empty userManagedBean.selectedUser.author.institution.controlNumber)}" 
					value="#{userManagedBean.selectedUser.author.jmbg}"
					maxlength="15" 
				/>
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) and (not empty userManagedBean.selectedUser.author.institution.controlNumber)}" >
					<p:message
						for="jmbg" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... directPhones .......           -->
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.directPhones)}" >
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.directPhones']}" 
						for="directPhones" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputText
					id="directPhones"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.directPhones)}"
					value="#{userManagedBean.selectedUser.author.directPhones}"
					maxlength="200" 
				/>
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.directPhones)}" >
					<p:message
						for="directPhones" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... localPhones .......           -->
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) and (not empty userManagedBean.selectedUser.author.institution.controlNumber)}" >
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.localPhones']}" 
						for="localPhones" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputText
					id="localPhones"
					rendered="#{(userManagedBean.loggedIn) and (not empty userManagedBean.selectedUser.author.institution.controlNumber)}"
					value="#{userManagedBean.selectedUser.author.localPhones}"
					maxlength="200" 
					/>
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) and (not empty userManagedBean.selectedUser.author.institution.controlNumber)}">
					<p:message
						for="localPhones" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... Address .......           -->
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.address)}" >
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.address']}" 
						for="address" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputText
					id="address"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.address)}"
					value="#{userManagedBean.selectedUser.author.address}"
					maxlength="200" 
					/>
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.address)}">
					<p:message
						for="address" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... city .......           -->
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.city)}" >
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.city']}" 
						for="city" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputText
					id="city"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.city)}"
					value="#{userManagedBean.selectedUser.author.city}"
					maxlength="200" 
					/>
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.city)}">
					<p:message
						for="city" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... ScopusID .......           -->
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.scopusID)}" >
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.scopusID']}" 
						for="scopusID" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputText
					id="scopusID"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.scopusID)}"
					value="#{userManagedBean.selectedUser.author.scopusID}"
					maxlength="200" 
					validatorMessage="#{messages['administration.user.editPanel.scopusID.format']}"
					 >
					<f:validateRegex pattern="[0-9]{10,11}" />
				</p:inputText>
						
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.scopusID)}">
					<p:message
						for="scopusID" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... ORCID .......           -->
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.ORCID)}" >
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.ORCID']}" 
						for="ORCID" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputText
					id="ORCID"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.ORCID)}"
					value="#{userManagedBean.selectedUser.author.ORCID}"
					maxlength="200" 
					validatorMessage="#{messages['administration.user.editPanel.ORCID.format']}"
					 >
					<f:validateRegex pattern="https://orcid\.org/0000-000(1-[5-9]|2-[0-9]|3-[0-4])[0-9]{3}-[0-9]{3}[0-9X]" />
				</p:inputText>
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.loggedIn) or (empty userManagedBean.selectedUser.author.ORCID)}">
					<p:message
						for="ORCID" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
			</h:panelGrid>	
			<p:ajaxStatus for="institution_region" onstart="onStart()" oncomplete="onStop()" />
			<p:fragment
				id="institution_region"
				renderRegionOnly="true" 
				rendered="#{(not empty userManagedBean.selectedUser.author.controlNumber)}" >
				<h:panelGrid columns="3" columnClasses="width15, width80, width5" width="100%">
					<!-- ....... Institution.......           -->
					<p:outputPanel ajaxRendered="true">
						<mytags:outputLabel 
							value="#{messages['administration.user.editPanel.institution']}*" 
							for="institution" 
							errorStyleClass="errorMessage"
							/>
					</p:outputPanel>
					<p:selectOneMenu
						id="institution"
						value="#{userManagedBean.institution}"
						required="true"
						converter="institutionSelectConverter"
						>
						<p:ajax event="change" render="otherInstitutionGrid" limitRender="true" execute="@this" />
						<f:selectItems value="#{institutionManagedBean.allList}"/>
					</p:selectOneMenu>
					<p:outputPanel ajaxRendered="true">
						<p:message
							for="institution" 
							errorClass="errorMessage"
							infoClass="infoMessage"
							warnClass="warnMessage"
							fatalClass="fatalMessage" />
					</p:outputPanel>
					<!-- ....... Organization unit.......           -->
					<p:outputPanel
						ajaxRendered="true"
						rendered="#{not userManagedBean.jobAd}" >
						<mytags:outputLabel 
							value="#{messages['administration.user.editPanel.organizationUnit']}" 
							for="organizationUnit" 
							errorStyleClass="errorMessage"
							/>
					</p:outputPanel>
					<p:selectOneMenu
						id="organizationUnit"
						rendered="#{not userManagedBean.jobAd}"
						value="#{userManagedBean.selectedUser.author.organizationUnit}"
						converter="organizationUnitSelectConverter"
						>
						<f:selectItems value="#{organizationUnitManagedBean.allList}"/>
					</p:selectOneMenu>
					<p:outputPanel
						ajaxRendered="true"
						rendered="#{not userManagedBean.jobAd}" >
						<p:message
							for="organizationUnit" 
							errorClass="errorMessage"
							infoClass="infoMessage"
							warnClass="warnMessage"
							fatalClass="fatalMessage" />
					</p:outputPanel>
				</h:panelGrid>
				<h:panelGrid 
					id="otherInstitutionGrid"
					columns="3" 
					columnClasses="width15, width60, width25" 
					width="100%"
					>
					<!-- ....... Institution name .......           -->
					<p:outputPanel
						ajaxRendered="true"
						rendered="#{(userManagedBean.jobAd) and (not empty userManagedBean.selectedUser.author.institution) and (userManagedBean.selectedUser.author.institution.controlNumber == 'otherInstitution')}" >
						<mytags:outputLabel 
							value="#{messages['administration.user.editPanel.institution.otherInstitution']}*" 
							for="otherInstitution" 
							errorStyleClass="errorMessage"
							/>
					</p:outputPanel>
					<p:inputText
						id="otherInstitution"
						value="#{userManagedBean.selectedUser.author.institution.name.content}"
						maxlength="200" 
						required="true"
						rendered="#{(userManagedBean.jobAd) and (not empty userManagedBean.selectedUser.author.institution) and (userManagedBean.selectedUser.author.institution.controlNumber == 'otherInstitution')}"
					/>
					<p:outputPanel
						ajaxRendered="true"
						rendered="#{(userManagedBean.jobAd) and (not empty userManagedBean.selectedUser.author.institution) and (userManagedBean.selectedUser.author.institution.controlNumber == 'otherInstitution')}"
						>
						<p:message
							for="otherInstitution" 
							errorClass="errorMessage"
							infoClass="infoMessage"
							warnClass="warnMessage"
							fatalClass="fatalMessage" />
					</p:outputPanel>
				</h:panelGrid>
			</p:fragment>
			<h:panelGrid columns="6" columnClasses="width15, width20, width20, width20, width15, width5" width="100%"
				rendered="#{(userManagedBean.loggedIn)}">
				<!-- ....... Position.......           -->
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.currentPosition']}}" 
						for="position" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:selectOneMenu
					id="position"
					value="#{userManagedBean.selectedUser.author.currentPosition.position}"
					converter="positionSelectConverter"
					>
					<f:selectItems value="#{positionManagedBean.allList}"/>
				</p:selectOneMenu>
				<p:calendar
					value="#{userManagedBean.selectedUser.author.currentPosition.startDate.time}"
					enableManualInput="true"
					datePattern="dd/MM/yyyy"
					firstWeekDay="1"
					dayDisableFunction="disablementFutureDate"
					dayClassFunction="disablementFutureStyleClass"
					showFooter="false"
					showWeekDaysBar="false"
					showWeeksBar="false" 
					inputStyle="width:120px" />
				<p:inputText
					value="#{userManagedBean.selectedUser.author.currentPosition.researchArea}"
					maxlength="200" 
					/>
				<p:commandButton
					action="#{userManagedBean.authorPositions}"
					value="#{messages['administration.user.editPanel.btnFormerPositions']}"
					render="authorPositionEditModalPanel" 
					execute="@this"/>
				<p:outputPanel ajaxRendered="true">
					<p:message
						for="position" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... Title.......   -->        
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.title']}" 
						for="title" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputText
					id="title"
					value="#{userManagedBean.selectedUser.author.title}"
					maxlength="100"
					/>
				<h:outputText value="" />
				<h:outputText value="" />
				<h:outputText value="" />
				<p:outputPanel ajaxRendered="true">
					<p:message
						for="title" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... URI.......   -->        
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.uri']}" 
						for="uri" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputTextarea
					id="uri"
					value="#{userManagedBean.selectedUser.author.uri}"
					rows="3"
					 />
				<h:outputText value="" />
				<h:outputText value="" />
				<h:outputText value="" />
				<p:outputPanel ajaxRendered="true">
					<p:message
						for="uri" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... Language.......        
				<p:outputPanel ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.language']}*" 
						for="language" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:selectOneMenu
					id="language"
					value="#{userManagedBean.selectedUser.language}"
					required="true" >
					<f:selectItem itemValue="sr"
						itemLabel="#{messages['administration.user.editPanel.language.serbian']}" />
					<f:selectItem itemValue="en"
						itemLabel="#{messages['administration.user.editPanel.language.english']}" />
				</p:selectOneMenu>
				<h:outputText value="" />
				<h:outputText value="" />
				<p:outputPanel ajaxRendered="true">
					<p:message
						for="language" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>    -->
				<!-- ....... Type.......           -->
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.editMode != modesManagedBean.register) and (userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}" >
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.type']}*" 
						for="type" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:selectOneMenu
					id="type"
					value="#{userManagedBean.selectedUser.type}"
					rendered="#{(userManagedBean.editMode != modesManagedBean.register) and (userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					required="true">
					<f:selectItem itemValue="author"
						itemLabel="#{messages['administration.user.editPanel.type.author']}" />
					<f:selectItem itemValue="administrator"
						itemLabel="#{messages['administration.user.editPanel.type.administrator']}" />
				</p:selectOneMenu>
				<h:outputText 
					value="" 
					rendered="#{(userManagedBean.editMode != modesManagedBean.register) and (userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}" />
				<h:outputText 
					value="" 
					rendered="#{(userManagedBean.editMode != modesManagedBean.register) and (userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}" />
				<h:outputText 
					value="" 
					rendered="#{(userManagedBean.editMode != modesManagedBean.register) and (userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}" />
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.editMode != modesManagedBean.register) and (userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}">
					<p:message
						for="type" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
			</h:panelGrid>
			<h:panelGrid columns="3" columnClasses="width15, width60, width25" width="100%"
				rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData)}">
				<!-- ....... Email.......           -->
				<p:outputPanel
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.email']}*" 
						for="email" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:inputText
					id="email"
					value="#{userManagedBean.selectedUser.email}" 
					maxlength="50"
					required="true"
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}" 
					validatorMessage="#{messages['administration.user.editPanel.email.format']}">
					<f:validateRegex pattern="^[\w\-]([\.\w\-])+[\w\-]+@([\w\-]+\.)+[a-zA-Z]{2,4}$" />
				</p:inputText>
				<h:outputText 
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					value="" />
				<h:outputText 
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					value="" />
				<h:outputText 
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					value="" />
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}" >
					<p:message
						for="email" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... Password.......           -->
				<p:outputPanel
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.password']}*" 
						for="newPassword" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:password
					id="newPassword"
					value="#{userManagedBean.newPassword}" 
					maxlength="10"
					redisplay="true" 
					required="true"
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}" />
				<h:outputText 
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					value="" />
				<h:outputText 
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					value="" />
				<h:outputText 
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					value="" />
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}">
					<p:message
						for="newPassword" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
				<!-- ....... Repeated Password.......           -->
				<p:outputPanel
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					ajaxRendered="true">
					<mytags:outputLabel 
						value="#{messages['administration.user.editPanel.repeatedPassword']}*" 
						for="repeatedNewPassword" 
						errorStyleClass="errorMessage"
						/>
				</p:outputPanel>
				<p:password
					id="repeatedNewPassword"
					value="#{userManagedBean.repeatedNewPassword}" 
					maxlength="10"
					redisplay="true" 
					required="true"
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}" />
				<h:outputText 
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					value="" />
				<h:outputText 
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					value="" />
				<h:outputText 
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}"
					value="" />
				<p:outputPanel
					ajaxRendered="true"
					rendered="#{(userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserAdvancedData)}">
					<p:message
						for="repeatedNewPassword" 
						errorClass="errorMessage"
						infoClass="infoMessage"
						warnClass="warnMessage"
						fatalClass="fatalMessage" />
				</p:outputPanel>
			</h:panelGrid>
		</h:panelGrid>
		<!--================= Update, Create, Cancel buttons ====================  -->
		<h:panelGrid columns="2">
			<p:commandButton
				rendered="#{((userManagedBean.editMode == modesManagedBean.update) or (userManagedBean.editMode == modesManagedBean.updateUserBasicData) or (userManagedBean.editMode == modesManagedBean.updateUserAdvancedData) or (userManagedBean.editMode == modesManagedBean.addFormatName)) and (userManagedBean.editTabNumber == 0)}"
				action="#{userManagedBean.update}"
				value="#{messages['administration.user.editPanel.btnUpdate']}"
				render="userEditBasicDataModalPanel" 
				limitRender="true" 
				execute="@form"/>
			<p:commandButton
				rendered="#{(userManagedBean.editMode == modesManagedBean.add) and (userManagedBean.editTabNumber == 0)}"
				action="#{userManagedBean.add}"
				value="#{messages['administration.user.editPanel.btnCreate']}"
				render="userEditBasicDataModalPanel" 
				limitRender="true" 
				execute="@form" />
			<h:outputText rendered="#{(userManagedBean.editMode == modesManagedBean.viewDetails) and (userManagedBean.editTabNumber == 0)}" 
				value=""/>
			<p:commandButton
				rendered="#{((userManagedBean.editMode != modesManagedBean.register) and (userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.updateUserBasicData) and (userManagedBean.editMode != modesManagedBean.addFormatName)) and (userManagedBean.editTabNumber == 0)}"
				action="#{userManagedBean.switchToEditNoneMode}"
				value="#{messages['administration.user.editPanel.btnCancel']}"
				render="userEditBasicDataModalPanel"
				limitRender="true"
				immediate="true" 
				execute="@this" />
			<!-- <p:commandButton
				rendered="#{(userManagedBean.editMode == modesManagedBean.register) and (userManagedBean.editTabNumber == 0)}" 
				action="#{userManagedBean.nextEditTab}"
				value="#{messages['administration.user.editPanel.btnNext']}"
				render="mainPanel, #{userManagedBean.renderModalPanels}, userEditModalPanel" 
				execute="@form"/>  -->
			<p:commandButton
				rendered="#{(userManagedBean.editMode == modesManagedBean.register) and (userManagedBean.editTabNumber == 0)}" 
				action="#{userManagedBean.register}"
				value="#{messages['administration.user.editPanel.btnRegister']}"
				render="userEditBasicDataModalPanel" 
				execute="@form" />
			<p:commandButton
				rendered="#{((userManagedBean.editMode == modesManagedBean.register) or (userManagedBean.editMode == modesManagedBean.updateUserBasicData) or (userManagedBean.editMode == modesManagedBean.updateUserAdvancedData) or (userManagedBean.editMode == modesManagedBean.addFormatName)) and (userManagedBean.editTabNumber == 0)}"
				action="#{userManagedBean.exit}"
				value="#{messages['administration.user.editPanel.btnCancel']}"
				immediate="true" 
				execute="@this"/>
			<p:commandButton
				rendered="#{(userManagedBean.editTabNumber ge 2)}" 
				action="#{userManagedBean.finishWizard}"
				value="#{messages['administration.user.editPanel.btnAllRight']}"
				immediate="true"
				execute="@this"/>
			<h:outputText 
				rendered="#{(userManagedBean.editTabNumber ge 2)}" 
				value="" />
		</h:panelGrid>
	</h:panelGrid>

</ui:composition>